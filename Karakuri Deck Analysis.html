<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karakuri Archetype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="assets/js/card-loader.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Roboto+Slab:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #2a211c; /* Dark, earthy brown */
            color: #f5eadd; /* Creamy off-white */
        }
        .container {
            max-width: 1024px;
        }
        .card {
            background-color: #4b3832; /* Richer, wood-like brown */
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
            border: 1px solid #856d5b; /* Lighter, tan border */
        }
        .combo-step-card {
            background-color: #624a3e;
            border: 1px solid #a28a78;
        }
        .pro-con-card {
            background-color: #624a3e;
            border: 1px solid #a28a78;
        }
        .card-image-container {
            width: 100%;
            max-width: 180px;
            flex-shrink: 0;
        }
        .card-image {
            width: 100%;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out;
        }
        .card-placeholder {
            background-color: #4b3832;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.75rem;
            line-height: 1rem;
            font-weight: bold;
            height: 100%;
            min-height: 250px; 
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: 0 0 10px #4b3832;
        }
        .pro-icon { color: #34d399; }
        .con-icon { color: #ef4444; }
        .neutral-icon { color: #60a5fa; }
        .text-accent { color: #ff9900; } /* Karakuri Orange */
        .arrow-color { color: #ff9900; }
        .heading-underline {
            border-bottom: 2px solid #ff9900;
            display: inline-block;
            padding-bottom: 0.25rem;
        }
        .lore-link {
            color: #ff9900;
            font-weight: bold;
            text-decoration: none;
            border-bottom: 1px dotted #ff9900;
            transition: color 0.3s;
        }
        .lore-link:hover {
            color: #fff;
        }

        /* --- NEW ANIMATED BANNER STYLES --- */
        .banner-header {
            position: relative;
            height: 160px;
            background-color: #2a211c;
            border-radius: 1rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            margin-bottom: 2.5rem;
            border: 2px solid #856d5b;
        }

        #gear-banner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0.1;
        }

        .banner-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image:
                linear-gradient(to right, #2a211c, rgba(42, 33, 28, 0.7), #2a211c),
                radial-gradient(circle at center, rgba(255, 153, 0, 0.1), transparent 70%);
            z-index: 2;
        }

        .banner-header h1, .banner-header p {
            position: relative;
            z-index: 3;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
            font-family: 'Roboto Slab', serif;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="container mx-auto">
        <!-- MODIFIED Title Section -->
        <header class="banner-header text-center">
            <canvas id="gear-banner"></canvas>
            <h1 class="text-3xl md:text-5xl font-extrabold text-white mb-2">Karakuri</h1>
            <p class="text-lg md:text-xl text-orange-200">A Strategic Analysis of the Clockwork Synchro Engine</p>
        </header>

        <!-- Executive Summary Section -->
        <section class="mb-10 md:mb-16">
            <div class="card p-6">
                <h2 class="text-xl md:text-2xl font-bold text-white mb-4">Executive Summary</h2>
                <p class="text-orange-100">
                    The <strong class="text-accent font-bold">Karakuri</strong> archetype is an EARTH Machine strategy renowned for its explosive Synchro Summoning capabilities and its unique mechanic of manipulating battle positions. Originally a go-second OTK deck, Karakuri has evolved into a formidable go-first combo engine, using its efficient swarming and high-synergy plays to construct powerful, disruption-heavy end boards. The core philosophy remains: turn a single monster into a cascade of summons and searches, overwhelming the opponent with a relentless clockwork army.
                </p>
            </div>
        </section>

        <!-- The Clockwork Mandate and Engine Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">The Clockwork Mandate & Core Engine</h2>
            <p class="text-orange-100 mb-8 text-center max-w-2xl mx-auto">
                The archetype's identity is defined by two key principles: the "Clockwork Mandate" that forces attacks and position changes, and the strategic manipulation of those position changes to generate immense advantage.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Monsters -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-cogs text-4xl text-orange-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">The Main Deck Engine</h3>
                    </div>
                    <div class="space-y-4">
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Karakuri Merchant mdl 177 "Inashichi"</h4>
                            <p class="text-sm text-orange-100">The premier starter. On Normal Summon, it searches any "Karakuri" card, making it the most vital consistency tool.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Karakuri Komachi mdl 224 "Ninishi"</h4>
                            <p class="text-sm text-orange-100">A crucial Level 3 Tuner that grants an additional Normal Summon for a Karakuri, enabling instant field swarming.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Karakuri Bonze mdl 9763 "Kunamzan"</h4>
                            <p class="text-sm text-orange-100">A modern extender that Special Summons itself from the hand by changing a Karakuri's battle position.</p>
                        </div>
                    </div>
                </div>
                <!-- Spells & Synchros -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-book-open text-4xl text-orange-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">The Shoguns & Schematics</h3>
                    </div>
                    <div class="space-y-4">
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Karakuri Cash Cache</h4>
                            <p class="text-sm text-orange-100">A powerful search spell that adds a Level 4 or lower Karakuri from deck to hand, then changes a monster's position.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Karakuri Steel Shogun mdl 00X "Bureido"</h4>
                            <p class="text-sm text-orange-100">The core Synchro monster. It summons from deck and allows you to draw a card whenever a Karakuri's position changes.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Karakuri Super Shogun mdl 00N "Bureibu"</h4>
                            <p class="text-sm text-orange-100">The modern boss. On summon, it can either search any Karakuri card or Special Summon a Karakuri from the deck, offering incredible flexibility.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Core Combo Walkthrough Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Core Combo: The Merchant's Opening Gambit</h2>
            <p class="text-orange-100 mb-8 text-center max-w-2xl mx-auto">This walkthrough demonstrates the fundamental search-and-summon chain that forms the basis of nearly every Karakuri play, showcasing the power of <a href="https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=Karakuri&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=" target="_blank" class="lore-link">the intricate clockwork of their main deck monsters</a>.</p>
            <div class="flex flex-col items-center gap-6">
                <!-- Step 1 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                    <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="merchant-img-container" class="card-image-container flex-shrink-0 card-placeholder">Karakuri Merchant mdl 177 "Inashichi"</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#4b3832] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">1</span>
                                <h3 class="text-lg font-bold">Search the Schematics</h3>
                            </div>
                            <p class="text-orange-100">Normal Summon <strong class="text-accent font-bold">Merchant "Inashichi"</strong>. Activate its effect to search <strong class="text-accent font-bold">Karakuri Cash Cache</strong> from your deck.</p>
                        </div>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 2 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                     <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="komachi-img-container" class="card-image-container flex-shrink-0 card-placeholder">Karakuri Komachi mdl 224 "Ninishi"</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#4b3832] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">2</span>
                                <h3 class="text-lg font-bold">Assemble the Tuner</h3>
                            </div>
                            <p class="text-orange-100">Activate <strong class="text-accent font-bold">Cash Cache</strong>, targeting Merchant. Search for <strong class="text-accent font-bold">Komachi "Ninishi"</strong> and change Merchant's position.</p>
                        </div>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 3 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                     <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="burei-img-container" class="card-image-container flex-shrink-0 card-placeholder">Karakuri Shogun mdl 00 "Burei"</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#4b3832] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">3</span>
                                <h3 class="text-lg font-bold">Summon the Shogun</h3>
                            </div>
                            <p class="text-orange-100">Normal Summon <strong class="text-accent font-bold">Ninishi</strong>, then use its effect to Normal Summon another Karakuri. Synchro Summon into <strong class="text-accent font-bold">Karakuri Shogun mdl 00 "Burei"</strong> or <strong class="text-accent font-bold">Bureido</strong>, whose effect will trigger to summon another piece from the deck, continuing the combo.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Endboard Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">The Modern Endboard: A Fortress of Interruption</h2>
             <p class="text-orange-100 mb-8 text-center max-w-3xl mx-auto">
                Powered by external engines like Superheavy Samurai, the modern Karakuri deck aims to build a nearly unbreakable Turn 1 board featuring multiple omni-negates and specific counters, all while drawing 5-7 cards to fill the hand with generic hand traps.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mx-auto max-w-6xl">
                <!-- Baronne -->
                <div class="card p-6 pro-con-card flex flex-col h-full">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">
                        Baronne de Fleur 
                        <span class="inline-block px-2 py-1 text-xs font-medium text-red-200 bg-red-900/30 border border-red-500/50 rounded-full ml-2">forbidden</span>
                    </h3>
                    <div class="flex-grow flex items-center justify-center mb-4">
                        <div id="baronne-img-container" class="card-image-container card-placeholder">Baronne de Fleur</div>
                    </div>
                    <p class="text-orange-100 text-center">Provides a powerful omni-negate and destruction effect.</p>
                    <p class="text-red-300/70 mt-2 text-xs text-center italic">Currently unavailable in TCG format</p>
                </div>

                <!-- Apollousa -->
                <div class="card p-6 pro-con-card flex flex-col h-full">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">
                        Apollousa, Bow of the Goddess 
                        <span class="inline-block px-2 py-1 text-xs font-medium text-red-200 bg-red-900/30 border border-red-500/50 rounded-full ml-2">forbidden</span>
                    </h3>
                    <div class="flex-grow flex items-center justify-center mb-4">
                        <div id="apollousa-img-container" class="card-image-container card-placeholder">Apollousa, Bow of the Goddess</div>
                    </div>
                    <p class="text-orange-100 text-center">Offers multiple monster effect negations per turn.</p>
                    <p class="text-red-300/70 mt-2 text-xs text-center italic">Currently unavailable in TCG format</p>
                </div>

                <!-- Regulus -->
                <div class="card p-6 pro-con-card flex flex-col h-full">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">Therion "King" Regulus</h3>
                    <div class="flex-grow flex items-center justify-center mb-4">
                        <div id="regulus-img-container" class="card-image-container card-placeholder">Therion "King" Regulus</div>
                    </div>
                    <p class="text-orange-100 text-center">A searchable and reusable monster effect negate.</p>
                </div>

                <!-- Naturia Beast -->
                <div class="card p-6 pro-con-card flex flex-col h-full">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">Naturia Beast</h3>
                    <div class="flex-grow flex items-center justify-center mb-4">
                        <div id="naturia-img-container" class="card-image-container card-placeholder">Naturia Beast</div>
                    </div>
                    <p class="text-orange-100 text-center">Continuously negates Spell Cards, crippling many strategies.</p>
                </div>

                <!-- I:P Masquerena -->
                <div class="card p-6 pro-con-card flex flex-col h-full">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">I:P Masquerena</h3>
                    <div class="flex-grow flex items-center justify-center mb-4">
                        <div id="ip-img-container" class="card-image-container card-placeholder">I:P Masquerena</div>
                    </div>
                    <p class="text-orange-100 text-center">Enables a Quick Link Summon on the opponent's turn for further disruption.</p>
                </div>

                <!-- Bureibu -->
                <div class="card p-6 pro-con-card flex flex-col h-full">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">Karakuri Super Shogun "Bureibu"</h3>
                    <div class="flex-grow flex items-center justify-center mb-4">
                        <div id="bureibu-img-container" class="card-image-container card-placeholder">Karakuri Super Shogun mdl 00N "Bureibu"</div>
                    </div>
                    <p class="text-orange-100 text-center">Remains on field as a key engine piece and position changer.</p>
                </div>
            </div>
        </section>


        <!-- Pros, Cons, and Tech Cards Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Competitive Analysis</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Strengths Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-green-400 mb-4">Strengths</h3>
                    <ul class="list-disc list-inside space-y-2 text-orange-100">
                        <li><span class="pro-icon"><i class="fas fa-rocket"></i></span> <strong class="text-green-400 font-bold">Explosive Power:</strong> Capable of converting a single card into a full board and a hand full of resources.</li>
                        <li><span class="pro-icon"><i class="fas fa-check-double"></i></span> <strong class="text-green-400 font-bold">High Consistency:</strong> With access to one-card starters from engines like Superheavy Samurai, the deck is incredibly reliable.</li>
                        <li><span class="pro-icon"><i class="fas fa-layer-group"></i></span> <strong class="text-green-400 font-bold">Favorable Typing:</strong> As EARTH Machines, they have access to some of the best generic support in the game.</li>
                    </ul>
                </div>
                <!-- Weaknesses Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-red-400 mb-4">Weaknesses</h3>
                    <ul class="list-disc list-inside space-y-2 text-orange-100">
                        <li><span class="con-icon"><i class="fas fa-hand-paper"></i></span> <strong class="text-red-400 font-bold">"Glass Cannon" Nature:</strong> The long combo is extremely fragile. A single well-timed hand trap can end the turn.</li>
                        <li><span class="con-icon"><i class="fas fa-book-dead"></i></span> <strong class="text-red-400 font-bold">Droll & Lock Bird:</strong> This hand trap is devastating, as it shuts down the multiple searches required for the combo.</li>
                        <li><span class="con-icon"><i class="fas fa-meteor"></i></span> <strong class="text-red-400 font-bold">Nibiru, the Primal Being:</strong> The deck summons many monsters, making it vulnerable to Nibiru before a negate is established.</li>
                    </ul>
                </div>
                <!-- External Engines -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4">Synergistic Engines</h3>
                    <ul class="list-disc list-inside space-y-2 text-orange-100">
                        <li><span class="neutral-icon"><i class="fas fa-puzzle-piece"></i></span> <strong class="text-accent font-bold">Superheavy Samurai:</strong> Provides the most potent one-card starters, enabling the entire Karakuri engine without a Normal Summon.</li>
                        <li><span class="neutral-icon"><i class="fas fa-shield-alt"></i></span> <strong class="text-accent font-bold">Therion:</strong> Offers a searchable omni-negate in the form of "King" Regulus for combo protection and end board disruption.</li>
                         <li><span class="neutral-icon"><i class="fas fa-history"></i></span> <strong class="text-accent font-bold">Geargia:</strong> A historical partner that provided a slower, grind-focused search engine for the deck's OTK strategies.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- TCG Banlist Status Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Current TCG Banlist Status</h2>
            <div class="card p-6">
                <p class="text-orange-100 mb-4 text-center">
                    <strong class="text-red-500 font-bold">SIGNIFICANT IMPACT:</strong> The Karakuri archetype has been affected by key banlist restrictions:
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="card combo-step-card p-4">
                        <h4 class="text-lg font-bold text-red-500 mb-2">Forbidden Cards</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-orange-100">
                            <li><strong class="text-red-400">Baronne de Fleur (0 copies)</strong> - Primary Synchro boss monster</li>
                            <li><strong class="text-red-400">Apollousa, Bow of the Goddess (0 copies)</strong> - Key Link boss monster</li>
                            <li>Multiple omni-negates removed from end boards</li>
                        </ul>
                    </div>
                    <div class="card combo-step-card p-4">
                        <h4 class="text-lg font-bold text-orange-500 mb-2">Limited Cards</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-orange-100">
                            <li><strong class="text-orange-400">Called by the Grave (1 copy)</strong> - Combo protection</li>
                            <li><strong class="text-orange-400">Triple Tactics Talent (1 copy)</strong> - Response tool</li>
                        </ul>
                    </div>
                    <div class="card combo-step-card p-4">
                        <h4 class="text-lg font-bold text-green-400 mb-2">Unrestricted Cards</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-orange-100">
                            <li>All Karakuri main deck monsters (3 copies each)</li>
                            <li>Karakuri support spells and traps</li>
                            <li>Naturia Beast and other Synchro options</li>
                            <li>Superheavy Samurai engine pieces</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-4 p-3 bg-red-900 bg-opacity-30 rounded border-l-4 border-red-500">
                    <p class="text-sm text-orange-100"><strong>Meta Implications:</strong> With both Baronne de Fleur and Apollousa forbidden, Karakuri has lost access to its two most powerful generic boss monsters, severely impacting end board quality. The deck must now rely on weaker alternatives like Naturia Beast, I:P Masquerena, and archetype-specific Synchros, significantly reducing its competitive viability.</p>
                </div>
            </div>
        </section>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- KARAKURI GEAR ANIMATION ---
            const canvas = document.getElementById('gear-banner');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                let gears = [];
                let lastTime = 0;
                const gearColor = '#ff9900';

                const setCanvasSize = () => {
                    canvas.width = canvas.offsetWidth;
                    canvas.height = canvas.offsetHeight;
                };

                class Gear {
                    constructor(x, y, radius, teeth, speed, direction) {
                        this.x = x;
                        this.y = y;
                        this.radius = radius;
                        this.teeth = teeth;
                        this.speed = speed;
                        this.angle = 0;
                        this.direction = direction;
                    }

                    update(deltaTime) {
                        this.angle += this.speed * deltaTime * this.direction;
                    }

                    draw() {
                        ctx.beginPath();
                        ctx.strokeStyle = gearColor;
                        ctx.lineWidth = 2;
                        
                        const toothSize = this.radius * 0.2;
                        const step = Math.PI * 2 / this.teeth;

                        for (let i = 0; i < this.teeth; i++) {
                            const angle = this.angle + i * step;
                            const x1 = this.x + Math.cos(angle) * this.radius;
                            const y1 = this.y + Math.sin(angle) * this.radius;
                            const x2 = this.x + Math.cos(angle + step * 0.5) * (this.radius + toothSize);
                            const y2 = this.y + Math.sin(angle + step * 0.5) * (this.radius + toothSize);
                            const x3 = this.x + Math.cos(angle + step) * this.radius;
                            const y3 = this.y + Math.sin(angle + step) * this.radius;
                             
                            ctx.moveTo(x1, y1);
                            ctx.lineTo(x2, y2);
                            ctx.lineTo(x3, y3);
                        }
                        ctx.stroke();

                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.radius * 0.5, 0, Math.PI * 2);
                        ctx.stroke();
                    }
                }

                function initGears() {
                    gears = [
                        new Gear(canvas.width * 0.1, canvas.height * 0.2, 40, 10, 0.0005, 1),
                        new Gear(canvas.width * 0.9, canvas.height * 0.8, 60, 12, 0.0003, -1),
                        new Gear(canvas.width * 0.2, canvas.height * 0.9, 30, 8, 0.0007, 1),
                        new Gear(canvas.width * 0.8, canvas.height * 0.1, 50, 15, 0.0004, -1),
                         new Gear(canvas.width * 0.5, canvas.height * 0.5, 70, 20, 0.0002, 1)
                    ];
                }

                function animate(timestamp) {
                    const deltaTime = timestamp - lastTime;
                    lastTime = timestamp;

                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    gears.forEach(gear => {
                        gear.update(deltaTime);
                        gear.draw();
                    });

                    requestAnimationFrame(animate);
                }
                
                setCanvasSize();
                initGears();
                requestAnimationFrame(animate);

                window.addEventListener('resize', () => {
                    setCanvasSize();
                    initGears();
                });
            }


            // --- CARD IMAGE FETCHING SCRIPT ---
            
                const container = document.getElementById(containerId);
                if (!container) return;

                const apiUrl = `https://db.ygoprodeck.com/api/v7/cardinfo.php?name=${encodeURIComponent(cardName)}`;

                try {
                    const response = await fetch(apiUrl);
                    if (!response.ok) throw new Error(`API error: ${response.status}`);
                    const data = await response.json();
                    const imageUrl = data?.data?.[0]?.card_images?.[0]?.image_url;

                    if (imageUrl) {
                        const img = document.createElement('img');
                        img.src = imageUrl;
                        img.alt = cardName;
                        img.className = 'w-full h-auto rounded-lg shadow-md animate-fadeIn';
                        container.innerHTML = '';
                        container.appendChild(img);
                    } else {
                        throw new Error("Image URL not found in API response.");
                    }
                } catch (error) {
                    console.error(`Failed to fetch image for "${cardName}":`, error);
                    container.innerHTML = `<div class="card-placeholder animate-fadeIn">${cardName}</div>`;
                }
            }

            CardLoader.loadCards({
                'merchant-img-container': 'Karakuri Merchant mdl 177 "Inashichi"',
                'komachi-img-container': 'Karakuri Komachi mdl 224 "Ninishi"',
                'burei-img-container': 'Karakuri Shogun mdl 00 "Burei"',
                'baronne-img-container': 'Baronne de Fleur',
                'apollousa-img-container': 'Apollousa, Bow of the Goddess',
                'regulus-img-container': 'Therion "King" Regulus',
                'naturia-img-container': 'Naturia Beast',
                'ip-img-container': 'I:P Masquerena',
                'bureibu-img-container': 'Karakuri Super Shogun mdl 00N "Bureibu"'
            });


        });
    </script>
</body>
</html>



