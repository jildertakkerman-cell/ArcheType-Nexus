<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nekroz Archetype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="assets/js/card-loader.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Cinzel:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c1425; /* Deep Midnight Blue */
            color: #e0f2fe; /* Light Sky Blue */
        }
        .container {
            max-width: 1024px;
        }
        .card {
            background-color: #1e293b; /* Slate Blue */
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid #334155; /* Darker Slate */
        }
        .combo-step-card {
            background-color: #28354c;
            border: 1px solid #475569;
        }
        .pro-con-card {
            background-color: #28354c;
            border: 1px solid #475569;
        }
        .card-image-container {
            width: 100%;
            max-width: 180px;
            flex-shrink: 0;
        }
        .card-image {
            width: 100%;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out;
        }
        .card-placeholder {
            background-color: #334155;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.75rem;
            line-height: 1rem;
            font-weight: bold;
            height: 100%;
            min-height: 250px; 
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: 0 0 10px #334155;
            cursor: pointer;
        }
        .pro-icon { color: #34d399; }
        .con-icon { color: #ef4444; }
        .neutral-icon { color: #60a5fa; }
        .text-accent { color: #facc15; } /* Gold/Yellow */
        .arrow-color { color: #38bdf8; }
        .heading-underline {
            border-bottom: 2px solid #facc15;
            display: inline-block;
            padding-bottom: 0.25rem;
        }
        .lore-link {
            color: #facc15;
            font-weight: bold;
            text-decoration: none;
            border-bottom: 1px dotted #facc15;
            transition: color 0.3s;
        }
        .lore-link:hover {
            color: #fff;
        }

        /* --- Animated Banner Styles --- */
        .banner-header {
            position: relative;
            min-height: 160px;
            background-color: #0c1425;
            border-radius: 1rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            margin-bottom: 2.5rem;
            border: 1px solid #334155;
        }

        #ritual-banner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .banner-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle, rgba(12, 20, 37, 0.4) 0%, rgba(12, 20, 37, 0.8) 70%);
            z-index: 2;
        }

        .banner-header h1, .banner-header p {
            position: relative;
            z-index: 3;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
        }

        .banner-header h1 {
            font-family: 'Cinzel', serif;
        }

        @media (min-width: 768px) {
            .banner-header {
                margin-bottom: 4rem;
            }
        }
         /* --- Home Button --- */
        .ygo-home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: linear-gradient(135deg, #1e293b 0%, #334155 50%, #1e293b 100%);
            color: white;
            border: 2px solid #60a5fa;
            border-radius: 12px;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(96, 165, 250, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
        }
        .ygo-home-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(96, 165, 250, 0.5);
        }

        /* Card Popup Styles */
        #card-popup {
            position: fixed;
            background: linear-gradient(135deg, #1e293b 0%, #28354c 100%);
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 16px;
            max-width: 300px;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.3);
            z-index: 10000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
            font-family: 'Inter', sans-serif;
            color: #e0f2fe;
        }
        #card-popup.show {
            opacity: 1;
            pointer-events: auto;
        }
        #card-popup img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 12px;
        }
        #card-popup h3 {
            font-size: 1.125rem;
            font-weight: 700;
            color: #3b82f6;
            margin-bottom: 8px;
            text-align: center;
        }
        #card-popup .type {
            font-size: 0.875rem;
            color: #60a5fa;
            text-align: center;
            margin-bottom: 4px;
        }
        #card-popup .stats {
            font-size: 0.75rem;
            color: #93c5fd;
            text-align: center;
            margin-bottom: 8px;
        }
        #card-popup p {
            font-size: 0.875rem;
            line-height: 1.4;
            color: #e0f2fe;
            word-wrap: break-word;
        }

    </style>
</head>
<body class="p-4 md:p-8">
    <!-- Home Button -->
    <a href="index-refactored.html" class="ygo-home-button" title="Return to Archetype Nexus">
        <i class="fas fa-home text-2xl"></i>
    </a>

<div class="container mx-auto">
        <!-- Title Section -->
        <header class="banner-header text-center">
            <canvas id="ritual-banner"></canvas>
            <h1 class="text-3xl md:text-5xl font-extrabold text-white mb-2">Nekroz</h1>
            <p class="text-lg md:text-xl text-sky-200">A Study in Mirrored Power</p>
        </header>

        <!-- Executive Summary Section -->
        <section class="mb-10 md:mb-16">
            <div class="card p-6">
                <h2 class="text-xl md:text-2xl font-bold text-white mb-4">Executive Summary</h2>
                <p class="text-sky-100">
                    The <strong class="text-accent font-bold">Nekroz</strong> archetype redefined the potential of Ritual Summoning, transforming it from a cumbersome mechanic into a dominant competitive force. Through unprecedented search power, resource recursion, and a flexible, multi-purpose toolbox, Nekroz established itself as one of the most skillful and powerful decks of its era. A defining feature is the monsters' <a href="https://yugipedia.com/wiki/Nekroz" target="_blank" class="lore-link">dual-effect nature</a>, possessing both powerful hand effects and game-altering on-field abilities, ensuring no card is ever truly dead.
                </p>
            </div>
        </section>

        <!-- The Ritual Incarnations & Support Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">The Nekroz Armory: Monsters & Spells</h2>
            <p class="text-sky-100 mb-8 text-center max-w-2xl mx-auto">
                The Nekroz strategy is built upon a foundation of interconnected cards, with each monster and Spell serving a specific, vital function within the overall strategy.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Monsters -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-user-shield text-4xl text-sky-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">The Ritual Incarnations</h3>
                    </div>
                    <div class="space-y-4">
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Nekroz of Brionac</h4>
                            <p class="text-sm text-sky-100">The primary engine starter. Discard to search any "Nekroz" monster.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Nekroz of Unicore</h4>
                            <p class="text-sm text-sky-100">The central floodgate. While on the field, it negates the effects of all face-up monsters Special Summoned from the Extra Deck.</p>
                        </div>
                         <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Nekroz of Trishula</h4>
                            <p class="text-sm text-sky-100">The iconic board-breaker. On summon, banishes one card from the opponent's hand, field, and Graveyard.</p>
                        </div>
                    </div>
                </div>
                <!-- Spells -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-book-sparkles text-4xl text-sky-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">The Three Mirrors: Ritual Spells</h3>
                    </div>
                    <div class="space-y-4">
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Nekroz Kaleidoscope</h4>
                            <p class="text-sm text-sky-100">The most powerful and unique Ritual Spell. It can use one monster from the Extra Deck as the entire tribute for a Ritual Summon.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Nekroz Cycle</h4>
                            <p class="text-sm text-sky-100">The recovery tool. Can Ritual Summon "Nekroz" monsters from the Graveyard.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Nekroz Mirror</h4>
                            <p class="text-sm text-sky-100">The resource manager. Can banish "Nekroz" monsters from the Graveyard as tribute material.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Core Combo Walkthrough Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Core Combo: The Kaleidoscope-Herald Engine</h2>
            <p class="text-sky-100 mb-8 text-center max-w-2xl mx-auto">This foundational play turns the Extra Deck into a search tool, establishing a powerful floodgate and securing resources for the next turn.</p>
            <div class="flex flex-col items-center gap-6">
                <!-- Step 1 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                    <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="kaleidoscope-img-container" class="card-image-container flex-shrink-0 card-placeholder">Nekroz Kaleidoscope</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#1e293b] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">1</span>
                                <h3 class="text-lg font-bold">Activate the Mirror</h3>
                            </div>
                            <p class="text-sky-100">Activate <strong class="text-accent font-bold">Nekroz Kaleidoscope</strong>. Send the Level 4 Synchro Monster <strong class="text-accent font-bold">Herald of the Arc Light</strong> from your Extra Deck to the Graveyard.</p>
                        </div>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 2 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                     <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="unicore-img-container" class="card-image-container flex-shrink-0 card-placeholder">Nekroz of Unicore</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#1e293b] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">2</span>
                                <h3 class="text-lg font-bold">Summon the Floodgate</h3>
                            </div>
                            <p class="text-sky-100">Ritual Summon the Level 4 <strong class="text-accent font-bold">Nekroz of Unicore</strong> from your hand. Its continuous effect immediately begins negating the effects of all monsters on the field that were summoned from the Extra Deck.</p>
                        </div>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 3 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                     <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="herald-img-container" class="card-image-container flex-shrink-0 card-placeholder">Herald of the Arc Light</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#1e293b] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">3</span>
                                <h3 class="text-lg font-bold">Gain a Resource</h3>
                            </div>
                            <p class="text-sky-100">When <strong class="text-accent font-bold">Herald of the Arc Light</strong> is sent to the Graveyard, its effect triggers, allowing you to add any Ritual Monster or Ritual Spell from your Deck to your hand, setting up your next play.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Endboard Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Ideal Endboard Configurations</h2>
            <p class="text-sky-100 mb-8 text-center max-w-2xl mx-auto">A successful first turn for Nekroz aims to establish multiple layers of disruption, crippling the opponent's ability to play the game.</p>
            <div class="card p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Unicore -->
                    <div class="flex items-center gap-4 p-3 combo-step-card rounded-lg">
                        <div id="unicore-endboard-img" class="w-24 h-36 flex-shrink-0 card-placeholder">Nekroz of Unicore</div>
                        <div>
                            <h4 class="font-bold text-white">The Floodgate</h4>
                            <p class="text-sm text-sky-200">Nekroz of Unicore to negate all Extra Deck monster effects.</p>
                        </div>
                    </div>
                    <!-- Areadbhair -->
                    <div class="flex items-center gap-4 p-3 combo-step-card rounded-lg">
                        <div id="areadbhair-endboard-img" class="w-24 h-36 flex-shrink-0 card-placeholder">Nekroz of Areadbhair</div>
                        <div>
                            <h4 class="font-bold text-white">The Monster Negate</h4>
                            <p class="text-sm text-sky-200">Nekroz of Areadbhair provides a Quick Effect monster negate and banish.</p>
                        </div>
                    </div>
                    <!-- Valkyrus -->
                     <div class="flex items-center gap-4 p-3 combo-step-card rounded-lg">
                        <div id="valkyrus-endboard-img" class="w-24 h-36 flex-shrink-0 card-placeholder">Nekroz of Valkyrus</div>
                        <div>
                            <h4 class="font-bold text-white">Battle Protection</h4>
                            <p class="text-sm text-sky-200">Nekroz of Valkyrus in hand to negate an attack and end the Battle Phase.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pros, Cons, and Tech Cards Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Competitive Analysis</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Strengths Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-green-400 mb-4">Strengths</h3>
                    <ul class="list-disc list-inside space-y-2 text-sky-100">
                        <li><span class="pro-icon"><i class="fas fa-search"></i></span> <strong class="text-green-400 font-bold">Unmatched Consistency:</strong> The deck has an unparalleled ability to search for any card it needs.</li>
                        <li><span class="pro-icon"><i class="fas fa-recycle"></i></span> <strong class="text-green-400 font-bold">Resilience:</strong> Its resource loop and recovery from the Graveyard make it incredibly difficult to defeat in a long game.</li>
                        <li><span class="pro-icon"><i class="fas fa-ban"></i></span> <strong class="text-green-400 font-bold">Anti-Meta Potential:</strong> Nekroz of Unicore is a devastating floodgate against any deck reliant on Extra Deck monsters.</li>
                    </ul>
                </div>
                <!-- Weaknesses Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-red-400 mb-4">Weaknesses</h3>
                    <ul class="list-disc list-inside space-y-2 text-sky-100">
                        <li><span class="con-icon"><i class="fas fa-hand-paper"></i></span> <strong class="text-red-400 font-bold">Choke Points:</strong> Highly vulnerable to hand traps like <strong class="text-accent font-bold">Ash Blossom</strong> and especially <strong class="text-accent font-bold">Droll & Lock Bird</strong>.</li>
                        <li><span class="con-icon"><i class="fas fa-times-circle"></i></span> <strong class="text-red-400 font-bold">Graveyard Hate:</strong> Cards like <strong class="text-accent font-bold">Abyss Dweller</strong> or <strong class="text-accent font-bold">D.D. Crow</strong> can disrupt crucial recovery plays.</li>
                    </ul>
                </div>
                <!-- External Engines -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4">External Synergies</h3>
                    <ul class="list-disc list-inside space-y-2 text-sky-100">
                        <li><span class="neutral-icon"><i class="fas fa-church"></i></span> <strong class="text-accent font-bold">Dogmatika Engine:</strong> Uses cards like <strong class="text-accent font-bold">Nadir Servant</strong> to send <strong class="text-accent font-bold">Herald of the Arc Light</strong> to the graveyard, triggering its search while also setting up Dogmatika plays.</li>
                        <li><span class="neutral-icon"><i class="fas fa-magic"></i></span> <strong class="text-accent font-bold">Impcantation Engine:</strong> Provides free bodies for tributes and searches for missing Ritual pieces, though it locks you out of the Extra Deck.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- TCG Banlist Status Section -->
        <section>
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">Current TCG Banlist Status</h2>
            <div class="card p-6">
                <p class="text-gray-300 mb-4 text-center">
                    The Nekroz archetype itself is largely untouched by the banlist. However, its historical power was partly due to a key enabler which is now forbidden, and it relies on generic support cards that are limited.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="card combo-step-card p-4">
                        <h4 class="text-lg font-bold text-green-400 mb-2">Unrestricted Cards</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-gray-300">
                           <li>Nekroz of Brionac, Unicore, Clausolas, etc. (3 each)</li>
                           <li>All Nekroz Ritual Spells (3 each)</li>
                           <li>Shurit, Strategist of the Nekroz (3)</li>
                        </ul>
                    </div>
                    <div class="card combo-step-card p-4">
                        <h4 class="text-lg font-bold text-yellow-400 mb-2">Limited Cards</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-gray-300">
                            <li>Reinforcement of the Army (1)</li>
                            <li>Herald of the Arc Light (1)</li>
                        </ul>
                    </div>
                     <div class="card combo-step-card p-4">
                        <h4 class="text-lg font-bold text-red-500 mb-2">Forbidden Cards</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-gray-300">
                            <li>Djinn Releaser of Rituals (0)</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-4 p-3 bg-blue-900 bg-opacity-30 rounded border-l-4 border-blue-500">
                    <p class="text-sm text-gray-300"><strong>Meta Implications:</strong> While the core Nekroz engine is at full power, the limitation of key generic searchers and combo enablers like 'Herald' requires more careful resource management. The banning of 'Djinn' removes the historical lockdown combo, shifting the deck's focus from an oppressive lock to a more interactive control strategy.</p>
                </div>
            </div>
        </section>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const canvas = document.getElementById('ritual-banner');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                let particles = [];
                const numParticles = 100;

                const setCanvasSize = () => {
                    canvas.width = canvas.offsetWidth;
                    canvas.height = canvas.offsetHeight;
                };

                class Particle {
                    constructor(x, y) {
                        this.x = x;
                        this.y = y;
                        this.size = Math.random() * 2 + 1;
                        this.speedX = Math.random() * 2 - 1;
                        this.speedY = Math.random() * -2 - 1; // Move upwards
                        this.color = `rgba(56, 189, 248, ${Math.random()})`; // Light Blue with random opacity
                    }

                    update() {
                        this.x += this.speedX;
                        this.y += this.speedY;

                        if (this.y < 0) {
                            this.y = canvas.height;
                            this.x = Math.random() * canvas.width;
                        }
                    }

                    draw() {
                        ctx.fillStyle = this.color;
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }

                function init() {
                    particles = [];
                    for (let i = 0; i < numParticles; i++) {
                        particles.push(new Particle(Math.random() * canvas.width, Math.random() * canvas.height));
                    }
                }

                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    particles.forEach(particle => {
                        particle.update();
                        particle.draw();
                    });
                    requestAnimationFrame(animate);
                }

                setCanvasSize();
                init();
                animate();

                window.addEventListener('resize', () => {
                    setCanvasSize();
                    init();
                });
            }

            // --- Card Popup System ---
            const cardDataCache = {};
            let currentPopupCard = null;
            let isPopupVisible = false;

            async function fetchCardData(cardName) {
                if (cardDataCache[cardName]) {
                    return cardDataCache[cardName];
                }
                try {
                    const response = await fetch(`https://db.ygoprodeck.com/api/v7/cardinfo.php?name=${encodeURIComponent(cardName)}`);
                    if (!response.ok) throw new Error('API error');
                    const data = await response.json();
                    const card = data.data[0];
                    cardDataCache[cardName] = card;
                    return card;
                } catch (error) {
                    console.error(`Failed to fetch data for "${cardName}":`, error);
                    return null;
                }
            }

            function showPopup(cardData, event) {
                const popup = document.getElementById('card-popup');
                if (!popup || !cardData) return;

                const imageUrl = cardData.card_images?.[0]?.image_url;
                const name = cardData.name || 'Unknown';
                const type = cardData.type || '';
                const desc = cardData.desc || '';
                const atk = cardData.atk !== undefined ? cardData.atk : '';
                const def = cardData.def !== undefined ? cardData.def : '';
                const level = cardData.level ? `Level ${cardData.level}` : '';
                const race = cardData.race || '';
                const attribute = cardData.attribute || '';

                let stats = '';
                if (level) stats += level + ' ';
                if (race) stats += race + ' ';
                if (attribute) stats += attribute + ' ';
                if (atk !== '') stats += `ATK/${atk} `;
                if (def !== '') stats += `DEF/${def}`;

                popup.innerHTML = `
                    ${imageUrl ? `<img src="${imageUrl}" alt="${name}">` : ''}
                    <h3>${name}</h3>
                    <p class="type">${type}</p>
                    <p class="stats">${stats}</p>
                    <p>${desc}</p>
                `;

                popup.classList.add('show');
                isPopupVisible = true;
                currentPopupCard = cardData;
                movePopup(event);
            }

            function hidePopup() {
                const popup = document.getElementById('card-popup');
                if (popup) {
                    popup.classList.remove('show');
                    isPopupVisible = false;
                    currentPopupCard = null;
                }
            }

            function movePopup(event) {
                if (!isPopupVisible) return;
                const popup = document.getElementById('card-popup');
                if (!popup) return;

                const mouseX = event.clientX;
                const mouseY = event.clientY;
                const popupWidth = 300;
                const popupHeight = 400;
                const margin = 10;

                let left = mouseX + margin;
                let top = mouseY + margin;

                if (left + popupWidth > window.innerWidth) {
                    left = mouseX - popupWidth - margin;
                }
                if (top + popupHeight > window.innerHeight) {
                    top = mouseY - popupHeight - margin;
                }

                popup.style.left = `${left}px`;
                popup.style.top = `${top}px`;
            }

            document.addEventListener('mousemove', movePopup);
            document.addEventListener('click', (event) => {
                if (!event.target.closest('.card-placeholder')) {
                    hidePopup();
                }
            });

            const cardsToLoad = {
                'kaleidoscope-img-container': 'Nekroz Kaleidoscope',
                'unicore-img-container': 'Nekroz of Unicore',
                'herald-img-container': 'Herald of the Arc Light',
                'unicore-endboard-img': 'Nekroz of Unicore',
                'areadbhair-endboard-img': 'Nekroz of Areadbhair',
                'valkyrus-endboard-img': 'Nekroz of Valkyrus'
            };

            for (const [containerId, cardName] of Object.entries(cardsToLoad)) {
                const container = document.getElementById(containerId);
                if (container) {
                    container.innerHTML = `<div class="card-placeholder animate-fadeIn">${cardName}</div>`;
                    container.addEventListener('click', async (event) => {
                        event.stopPropagation();
                        if (isPopupVisible && currentPopupCard?.name === cardName) {
                            hidePopup();
                        } else {
                            const cardData = await fetchCardData(cardName);
                            showPopup(cardData, event);
                        }
                    });
                }
            }


        });
    </script>

    <!-- Card Popup Container -->
    <div id="card-popup"></div>

</body>
</html>

