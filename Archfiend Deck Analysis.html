<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archfiend Archetype Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- We'll use the card-loader.js file, assuming it's in an 'assets/js/' folder -->
    <script src="assets/js/card-loader.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Using Playfair Display for a more "demonic" or "ancient text" feel for headings -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #11080b; /* Deep, dark crimson/black */
            color: #fde8ef; /* Light pink/white */
        }
        .container {
            max-width: 1024px;
        }
        .card {
            background-color: #2a0a12; /* Dark maroon */
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid #581c37; /* Muted crimson border */
            backdrop-filter: blur(10px);
        }
        .combo-step-card, .pro-con-card {
            background-color: rgba(42, 10, 18, 0.8);
            border: 1px solid #9f1239;
        }
        .card-image-container {
            width: 100%;
            max-width: 180px;
            flex-shrink: 0;
            cursor: pointer; /* Added cursor pointer as in Abyss Actor */
        }
        .card-image {
            width: 100%;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        .card-placeholder {
            background-color: #2a0a12;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.75rem;
            line-height: 1rem;
            font-weight: bold;
            height: 100%;
            min-height: 250px;
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: 0 0 10px #2a0a12;
            border: 1px dashed #9f1239;
        }
        .pro-icon { color: #34d399; }
        .con-icon { color: #ef4444; }
        .neutral-icon { color: #60a5fa; }
        .text-accent { color: #f43f5e; } /* Bright Rose/Crimson for accents */
        .arrow-color { color: #f43f5e; }
        .heading-underline {
            border-bottom: 2px solid #f43f5e;
            display: inline-block;
            padding-bottom: 0.25rem;
            font-family: 'Playfair Display', serif; /* Thematic heading font */
        }
        .lore-link {
            color: #f43f5e;
            font-weight: bold;
            text-decoration: none;
            border-bottom: 1px dotted #f43f5e;
            transition: color 0.3s, text-shadow 0.3s;
        }
        .lore-link:hover {
            color: #fff;
            text-shadow: 0 0 5px #f43f5e;
        }

        /* --- NEW ARCHFIEND ANIMATED BANNER --- */
        .banner-header {
            position: relative;
            min-height: 160px;
            background-color: #11080b;
            border-radius: 1rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            margin-bottom: 2.5rem;
            border: 1px solid #581c37;
        }

        #ember-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .banner-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(ellipse at bottom, rgba(42, 10, 18, 0.4) 0%, rgba(17, 8, 11, 0.9) 100%);
            z-index: 2;
        }

        .banner-header h1, .banner-header p {
            position: relative;
            z-index: 3;
            text-shadow: 0 0 15px rgba(244, 63, 94, 0.7);
        }
        
        .banner-header h1 {
             font-family: 'Playfair Display', serif; /* Thematic heading font */
        }

        /* --- Card Popup Styles (Themed for Archfiend) --- */
        #card-popup {
            position: fixed;
            display: none;
            opacity: 0;
            padding: 1rem;
            background-color: rgba(26, 10, 14, 0.95); /* Dark crimson blur */
            border: 1px solid #f43f5e;
            border-radius: 0.75rem;
            color: #fde8ef;
            max-width: 300px;
            z-index: 1000;
            pointer-events: none;
            transition: opacity 0.2s ease-in-out;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            font-size: 0.875rem;
        }
        #card-popup h3 {
            font-family: 'Playfair Display', serif;
            color: #f43f5e;
            font-weight: bold;
            font-size: 1.125rem;
        }
        #card-popup p {
            margin-top: 0.5rem;
        }
        #card-popup-stats {
            font-family: 'Inter', sans-serif;
            color: #f43f5e;
            font-weight: 600;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <!-- Home button from other pages -->
    <a href="index.html" class="ygo-home-button" title="Return to Archetype Nexus" style="background: linear-gradient(135deg, #2a0a12 0%, #581c37 50%, #2a0a12 100%); border-color: #f43f5e; box-shadow: 0 4px 15px rgba(244, 63, 94, 0.4), 0 0 20px rgba(244, 63, 94, 0.2);">
        <i class="fas fa-home"></i>
        <span class="ygo-home-text">NEXUS</span>
    </a>

    <!-- Card Popup Div -->
    <div id="card-popup"></div>

    <div class="container mx-auto">
        <!-- Title Section -->
        <header class="banner-header text-center">
            <canvas id="ember-canvas"></canvas>
            <h1 class="text-3xl md:text-5xl font-extrabold text-white mb-2">ARCHFIEND</h1>
            <p class="text-lg md:text-xl text-red-200">The Fortress of the Summoned Skull</p>
        </header>

        <!-- Executive Summary Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn">
            <div class="card p-6">
                <h2 class="text-xl md:text-2xl font-bold text-white mb-4 heading-underline">Strategic Briefing</h2>
                <p class="text-indigo-200">
                    The <strong class="text-accent font-bold">"Archfiend"</strong> archetype is not a single, cohesive strategy but a fragmented collection of Fiend monsters. This analysis focuses on its modern subset: the deck built around <strong class="text-accent font-bold">"Summoned Skull"</strong> and its retrained boss monsters.
                </p>
                <p class="text-indigo-200 mt-2">
                    This strategy is mechanically parasitic; it relies on the broader "Archfiend" support (searchers and traps) to function, but legacy Archfiend cards don't effectively summon the new bosses. Therefore, the deck's success is entirely dependent on hybrid engines like "Burning Abyss" and "Labrynth" to execute its grind-game, control-oriented strategy of building a "sticky fortress." You can explore the full <a href="https://db.ygoprodeck.com/search/?&q=Archfiend&desc=true&sort=name" target="_blank" class="lore-link">Archfiend armory</a> to see the sheer breadth of cards sharing this name.
                </p>
            </div>
        </section>

        <!-- The Summoned Skull Armory Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.2s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-8 text-center heading-underline">The "Summoned Skull" Armory</h2>
            
            <!-- New Intro Paragraph -->
            <p class="text-indigo-200 mb-8 text-center max-w-3xl mx-auto">
                The deck's primary objective is to summon its "retrained" Summoned Skull bosses. Critically, all share the same name on the field and have a powerful failsafe: if sent to the GY by an <strong class="text-white">opponent's card</strong>, they Special Summon 1 "Summoned Skull" from the hand, Deck, or GY.
            </p>
        
            <!-- Redesigned 2-column Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                
                <!-- Column 1: The Defensive Fortress -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-shield-alt text-4xl text-red-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">The Defensive Fortress</h3>
                    </div>
                    <div class="space-y-4">
                        <!-- Archfiend's Call -->
                        <div class="card combo-step-card p-4 flex items-start gap-4">
                            <div id="call-img-small" class="w-24 flex-shrink-0 card-placeholder" style="min-height: 140px;">Call</div>
                            <div>
                                <h4 class="text-lg font-bold text-accent mb-1">Archfiend's Call (Synchro)</h4>
                                <p class="text-sm text-indigo-200"><strong class="text-white">Role:</strong> Provides blanket targeting protection for all "Summoned Skull" monsters (including itself).</p>
                            </div>
                        </div>
                        <!-- Archfiend's Ascent -->
                        <div class="card combo-step-card p-4 flex items-start gap-4">
                            <div id="ascent-img-small" class="w-24 flex-shrink-0 card-placeholder" style="min-height: 140px;">Ascent</div>
                            <div>
                                <h4 class="text-lg font-bold text-accent mb-1">Archfiend's Ascent (Xyz)</h4>
                                <p class="text-sm text-indigo-200"><strong class="text-white">Role:</strong> Prevents "Summoned Skull" monsters from being destroyed by detaching a material.</p>
                            </div>
                        </div>
                    </div>
                </div>
        
                <!-- Column 2: Offense & Utility -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-gavel text-4xl text-red-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">Offense & Utility</h3>
                    </div>
                    <div class="space-y-4">
                        <!-- Archfiend's Manifestation -->
                        <div class="card combo-step-card p-4 flex items-start gap-4">
                            <div id="manifestation-img-small" class="w-24 flex-shrink-0 card-placeholder" style="min-height: 140px;">Manifest.</div>
                            <div>
                                <h4 class="text-lg font-bold text-accent mb-1">Archfiend's Manifestation (Fusion)</h4>
                                <p class="text-sm text-indigo-200"><strong class="text-white">Role:</strong> The beatdown enabler. Gives all "Summoned Skull" monsters a 500 ATK boost.</p>
                            </div>
                        </div>
                        <!-- Archfiend's Awakening -->
                        <div class="card combo-step-card p-4 flex items-start gap-4">
                            <div id="awakening-img-small" class="w-24 flex-shrink-0 card-placeholder" style="min-height: 140px;">Awakening</div>
                            <div>
                                <h4 class="text-lg font-bold text-accent mb-1">Archfiend's Awakening (Ritual)</h4>
                                <p class="text-sm text-indigo-200"><strong class="text-white">Role:</strong> A self-sufficient defender immune to battle and monster effect destruction (except from Rituals).</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- The shared floating effect is now in the intro P tag -->
        </section>

        <!-- The Central Engine Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.4s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-8 text-center heading-underline">The Central Engine: Heiress Loop</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Heiress -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-key text-4xl text-red-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">The Central Node</h3>
                    </div>
                    <div class="card combo-step-card p-4">
                        <h4 class="text-lg font-bold text-accent mb-1">Archfiend Heiress</h4>
                        <div id="heiress-img-container" class="card-image-container mx-auto my-4 card-placeholder">Archfiend Heiress</div>
                        <p class="text-sm text-indigo-200">The most important card. If sent to the GY by a card effect (from anywhere!), you can search <strong class="text-white">any "Archfiend" card</strong>. The goal is to "dump" this card from the deck.</p>
                    </div>
                </div>
                <!-- Triggers & Payoffs -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-cogs text-4xl text-red-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">Triggers & Payoffs</h3>
                    </div>
                    <div class="space-y-4">
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Trigger: Fiendish Rhino Warrior</h4>
                            <p class="text-sm text-indigo-200">If sent to the GY, it dumps any Fiend (Heiress) from Deck to GY, triggering her search.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Trigger: Archfiend's Ghastly Glitch</h4>
                            <p class="text-sm text-indigo-200">A Normal Trap that destroys a card, then dumps any Fiend (Heiress) from Deck to GY.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Payoff: Archfiend's Roar</h4>
                            <p class="text-sm text-indigo-200">A Normal Trap searched by Heiress. It revives an Archfiend (Heiress), which is then destroyed in the End Phase, <strong class="text-white">triggering Heiress again</strong> to continue the loop.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Core Combo Walkthrough Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.6s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">Core Combo: "Tour Guide" Starter</h2>
            <p class="text-indigo-200 mb-8 text-center max-w-2xl mx-auto">
                The deck's most explosive opener comes from the "Burning Abyss" engine, using a single "Tour Guide From the Underworld" to set up the entire Graveyard.
            </p>
            <div class="flex flex-col items-center gap-6">
                <!-- Step 1 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                    <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="tour-guide-img-container" class="card-image-container flex-shrink-0 card-placeholder">Tour Guide From the Underworld</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#2a0a12] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">1</span>
                                <h3 class="text-lg font-bold">Summon & Search</h3>
                            </div>
                            <p class="text-indigo-200">Normal Summon <strong class="text-accent">Tour Guide From the Underworld</strong>. Use its effect to Special Summon <strong class="text-accent">Fiendish Rhino Warrior</strong> from the Deck.</p>
                        </div>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 2 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                     <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="cherubini-img-container" class="card-image-container flex-shrink-0 card-placeholder">Cherubini, Ebon Angel...</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#2a0a12] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">2</span>
                                <h3 class="text-lg font-bold">Link Summon & Chain</h3>
                            </div>
                            <p class="text-indigo-200">Link Summon <strong class="text-accent">Cherubini, Ebon Angel of the Burning Abyss</strong>. This triggers two effects: <strong class="text-white">CL1: Fiendish Rhino Warrior</strong> (sent to GY) and <strong class="text-white">CL2: Cherubini</strong> (on-field effect).</p>
                        </div>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 3 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                     <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="heiress-combo-img-container" class="card-image-container flex-shrink-0 card-placeholder">Archfiend Heiress</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#2a0a12] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">3</span>
                                <h3 class="text-lg font-bold">The "Double Dump"</h3>
                            </div>
                            <p class="text-indigo-200">
                                <strong class="text-white">Chain Resolves:</strong> Cherubini's cost sends <strong class="text-accent">Archfiend Heiress</strong> to GY. Then, Rhino's effect sends another Fiend (e.g., <strong class="text-accent">Archfiend Emperor</strong>) to GY.
                                <br><strong class="text-white">New Chain:</strong> Heiress triggers, searching any "Archfiend" card (like <strong class="text-accent">Ghastly Glitch</strong> or <strong class="text-accent">Roar</strong>).
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Endboard Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.8s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">Establishing the End Board</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mx-auto max-w-4xl">
                <!-- The "Archfiend Fortress" -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">The "Archfiend Fortress" (Mid-Game Goal)</h3>
                    <div class="flex justify-center mb-4">
                        <div id="call-end-img-container" class="card-image-container card-placeholder">Archfiend's Call</div>
                    </div>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><strong class="text-accent">Archfiend's Call:</strong> Provides blanket targeting protection for all "Summoned Skull" monsters.</li>
                        <li><strong class="text-accent">Archfiend's Ascent:</strong> Provides destruction protection by detaching materials.</li>
                        <li><strong class="text-white">Result:</strong> A "soft lock" board that is immune to targeting and has 2 negations for destruction.</li>
                    </ul>
                </div>
                <!-- "Grind Game" Control Board -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">The "Grind Game" (Realistic T1)</h3>
                    <div class="flex justify-center mb-4">
                        <div id="glitch-end-img-container" class="card-image-container card-placeholder">Archfiend's Ghastly Glitch</div>
                    </div>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><strong class="text-accent">Cherubini on field:</strong> From the Tour Guide combo.</li>
                        <li><strong class="text-accent">Set 1-2 Traps:</strong> <strong class="text-white">Archfiend's Ghastly Glitch</strong> (for disruption + Heiress trigger) and/or <strong class="text-white">Archfiend's Roar</strong> (for follow-up).</li>
                        <li><strong class="text-white">Result:</strong> A flexible control board that generates advantage during the opponent's turn.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Competitive Analysis Section -->
        <section class="animate-fadeIn" style="animation-delay: 1s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">Competitive Analysis</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Strengths Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-green-400 mb-4">Strengths</h3>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><span class="pro-icon"><i class="fas fa-recycle"></i></span> <strong class="text-green-300">Strong Grind Game:</strong> The Heiress/Roar loop can out-resource slower decks.</li>
                        <li><span class="pro-icon"><i class="fas fa-boxes"></i></span> <strong class="text-green-300">Toolbox Engine:</strong> Heiress can search for revival, removal (Emperor), or disruption (Glitch) as needed.</li>
                        <li><span class="pro-icon"><i class="fas fa-cogs"></i></span> <strong class="text-green-300">Hybrid Synergy:</strong> Integrates perfectly with top-tier Fiend engines like Burning Abyss and Labrynth.</li>
                    </ul>
                </div>
                <!-- Weaknesses Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-red-400 mb-4">Weaknesses</h3>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><span class="con-icon"><i class="fas fa-book-dead"></i></span> <strong class="text-red-300">Graveyard Dependant:</strong> Extremely vulnerable to `Dimension Shifter`, `Macro Cosmos`, or `Bystial` monsters.</li>
                        <li><span class="con-icon"><i class="fas fa-exclamation-triangle"></i></span> <strong class="text-red-300">Floating Clause:</strong> Bosses only float if destroyed by an *opponent's card*, making them weak to Kaijus or non-destruction removal.</li>
                        <li><span class="con-icon"><i class="fas fa-unlink"></i></span> <strong class="text-red-300">Lack of Cohesion:</strong> "Bricks" easily by drawing payoffs (like Emperor) without starters (like Tour Guide).</li>
                    </ul>
                </div>
                <!-- Tech Cards -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4">Key Hybrid Engines</h3>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><span class="neutral-icon"><i class="fas fa-dungeon"></i></span> <strong class="text-accent">Labrynth Engine:</strong> Uses Labrynth monsters to search and recycle `Archfiend's Ghastly Glitch`.</li>
                        <li><span class="neutral-icon"><i class="fas fa-fire-alt"></i></span> <strong class="text-accent">Burning Abyss Engine:</strong> Uses `Tour Guide` and `Cherubini` for the "Double Dump" setup.</li>
                        <li><span class="neutral-icon"><i class="fas fa-music"></i></span> <strong class="text-accent">Resonator Engine:</strong> Uses `Red Resonator` to quickly Synchro Summon `Archfiend's Call`.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- TCG Banlist Status Section -->
        <section class="mb-8">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center"><i class="fas fa-gavel mr-2"></i>TCG Banlist Impact</h2>
            <div id="banlist-status">
                <!-- Banlist section will be populated by CardLoader.renderBanlistSection -->
            </div>
        </section>
        <!-- Deck Resources Section -->
        <section class="mb-8">
            <div id="deck-resources-container">
                <!-- Deck search section will be populated by CardLoader.renderDeckSearchSection -->
            </div>
        </section>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // --- ARCHFIEND EMBER ANIMATION ---
            const canvas = document.getElementById('ember-canvas');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                let particles = [];
                const numParticles = 150;

                const setCanvasSize = () => {
                    canvas.width = canvas.offsetWidth;
                    canvas.height = canvas.offsetHeight;
                };

                class Particle {
                    constructor() {
                        this.x = Math.random() * canvas.width;
                        this.y = canvas.height + Math.random() * 50;
                        this.speedY = Math.random() * 3 + 1; // Upward speed
                        this.speedX = (Math.random() - 0.5) * 1;
                        this.radius = Math.random() * 2 + 1;
                        this.life = 100;
                        this.color = `rgba(244, 63, 94, ${Math.random() * 0.5 + 0.3})`; // Crimson embers
                    }
                    update() {
                        this.y -= this.speedY;
                        this.x += this.speedX;
                        this.life--;
                        if (this.life <= 0) {
                            this.reset();
                        }
                    }
                    draw() {
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                        ctx.fillStyle = this.color;
                        ctx.globalAlpha = (this.life / 100) * 0.8;
                        ctx.fill();
                        ctx.closePath();
                    }
                    reset() {
                        this.x = Math.random() * canvas.width;
                        this.y = canvas.height + Math.random() * 10;
                        this.speedY = Math.random() * 3 + 1;
                        this.life = 100;
                    }
                }

                function initParticles() {
                    particles = [];
                    for (let i = 0; i < numParticles; i++) {
                        particles.push(new Particle());
                    }
                }

                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.globalAlpha = 1;
                    particles.forEach(p => {
                        p.update();
                        p.draw();
                    });
                    requestAnimationFrame(animate);
                }

                setCanvasSize();
                initParticles();
                animate();

                window.addEventListener('resize', () => {
                    setCanvasSize();
                    initParticles();
                });
            }

            // --- CARD LOADING ---
            // We use the CardLoader.loadCards function from assets/js/card-loader.js
            CardLoader.loadCards({
                'call-img-small': "Archfiend's Call",
                'ascent-img-small': "Archfiend's Ascent",
                'manifestation-img-small': "Archfiend's Manifestation",
                'awakening-img-small': "Archfiend's Awakening",
                'heiress-img-container': 'Archfiend Heiress',
                'tour-guide-img-container': 'Tour Guide From the Underworld',
                'cherubini-img-container': 'Cherubini, Ebon Angel of the Burning Abyss',
                'heiress-combo-img-container': 'Archfiend Heiress',
                'call-end-img-container': "Archfiend's Call",
                'glitch-end-img-container': "Archfiend's Ghastly Glitch"
            });
            
            // Render banlist section
            await CardLoader.renderBanlistSection('banlist-status', [
                'Summoned Skull',
                'Archfiend Heiress',
                "Archfiend's Call",
                "Archfiend's Ghastly Glitch",
                "Archfiend's Roar",
                "Archfiend's Ascent",
                "Archfiend's Manifestation",
                "Archfiend's Awakening",
                'Toon Summoned Skull',
                'B. Skull Dragon'
            ], {
                archetypeName: 'Archfiend',
                archetypeTraits: {
                    coreMechanic: 'Summoned Skull engine with hybrid strategies',
                    supportReliance: 'medium',
                    adaptability: 'high',
                    resilience: 'medium',
                    keyLoss: 'generic boss monsters',
                    alternativeStrategy: 'high'
                },
                relatedCards: ['Tour Guide From the Underworld', 'Cherubini, Ebon Angel of the Burning Abyss', 'Foolish Burial']
            });

            // Render deck search section
            await CardLoader.renderDeckSearchSection('deck-resources-container', 'Archfiend', {});
        });
    </script>
</body>
</html>

