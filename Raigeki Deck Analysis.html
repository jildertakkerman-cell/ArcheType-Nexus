<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raigeki Card Series Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- IMPORTANT: Assuming card-loader.js is in 'assets/js/' like your other files -->
    <script src="assets/js/card-loader.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0b0a1a; /* Very dark midnight blue */
            color: #e0e7ff; /* Light lavender white */
        }
        .container {
            max-width: 1024px;
        }
        .card {
            background-color: #1a1633; /* Darker purple/blue */
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid #facc15; /* Lightning yellow border */
        }
        .combo-step-card, .pro-con-card {
            background-color: rgba(26, 22, 51, 0.8); /* Dark purple, slightly transparent */
            border: 1px solid #facc15;
        }
        .card-image-container {
            width: 100%;
            max-width: 180px;
            flex-shrink: 0;
            cursor: pointer;
        }
        .card-image {
            width: 100%;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        .card-placeholder {
            background-color: #2a2457;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.75rem;
            line-height: 1rem;
            font-weight: bold;
            height: 100%;
            min-height: 250px;
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: 0 0 10px #2a2457;
            border: 1px dashed #facc15;
        }
        .pro-icon { color: #34d399; }
        .con-icon { color: #ef4444; }
        .neutral-icon { color: #60a5fa; }
        .text-accent { color: #facc15; } /* Lightning Yellow */
        .arrow-color { color: #facc15; }
        .heading-underline {
            border-bottom: 2px solid #facc15;
            display: inline-block;
            padding-bottom: 0.25rem;
        }
        .lore-link {
            color: #facc15;
            font-weight: bold;
            text-decoration: none;
            border-bottom: 1px dotted #facc15;
            transition: color 0.3s, text-shadow 0.3s;
        }
        .lore-link:hover {
            color: #fff;
            text-shadow: 0 0 5px #facc15;
        }

        /* --- NEW RAIGEKI ANIMATED BANNER --- */
        .banner-header {
            position: relative;
            min-height: 160px;
            background-color: #0b0a1a;
            border-radius: 1rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            margin-bottom: 2.5rem;
            border: 1px solid #facc15;
        }

        #lightning-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .banner-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(ellipse at center, rgba(11, 10, 26, 0.4) 0%, rgba(11, 10, 26, 0.9) 100%);
            z-index: 2;
        }

        .banner-header h1, .banner-header p {
            position: relative;
            z-index: 3;
            text-shadow: 0 0 15px rgba(250, 204, 21, 0.7);
        }
        
        .banner-header h1 {
             font-family: 'Orbitron', sans-serif;
        }

        /* --- Yu-Gi-Oh! Themed Home Button Styles --- */
        .ygo-home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #1e1b4b 100%);
            color: white;
            border: 2px solid #6366f1;
            border-radius: 12px;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 4px 15px rgba(99, 102, 241, 0.4),
                0 0 20px rgba(99, 102, 241, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            overflow: hidden;
        }
        
        .ygo-home-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 30%, rgba(99, 102, 241, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(139, 92, 246, 0.2) 0%, transparent 50%);
            animation: ygoButtonPulse 3s ease-in-out infinite;
            pointer-events: none;
        }
        
        .ygo-home-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 
                0 8px 25px rgba(99, 102, 241, 0.6),
                0 0 30px rgba(99, 102, 241, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border-color: #8b5cf6;
        }
        
        .ygo-home-button:active {
            transform: translateY(-1px) scale(1.02);
        }
        
        .ygo-home-button i {
            font-size: 22px;
            position: relative;
            z-index: 2;
            text-shadow: 0 0 10px rgba(99, 102, 241, 0.8);
            animation: ygoIconGlow 2s ease-in-out infinite alternate;
        }
        
        .ygo-home-button .ygo-home-text {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            font-weight: 600;
            color: #a5b4fc;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
            opacity: 0;
            transition: opacity 0.3s ease;
            white-space: nowrap;
            pointer-events: none;
        }
        
        .ygo-home-button:hover .ygo-home-text {
            opacity: 1;
        }
        
        @keyframes ygoButtonPulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        @keyframes ygoIconGlow {
            0% { 
                text-shadow: 
                    0 0 10px rgba(99, 102, 241, 0.8),
                    0 0 20px rgba(139, 92, 246, 0.4);
            }
            100% { 
                text-shadow: 
                    0 0 15px rgba(99, 102, 241, 1),
                    0 0 30px rgba(139, 92, 246, 0.6),
                    0 0 40px rgba(59, 130, 246, 0.3);
            }
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .ygo-home-button {
                width: 50px;
                height: 50px;
                top: 15px;
                left: 15px;
            }
            
            .ygo-home-button i {
                font-size: 18px;
            }
        }
        /* Card Popup Styles (Themed for Raigeki) */
        #card-popup {
            position: fixed;
            display: none;
            opacity: 0;
            padding: 1rem;
            background-color: rgba(11, 10, 26, 0.95); /* Dark blue popup */
            border: 1px solid #facc15; /* Yellow border */
            border-radius: 0.75rem;
            color: #e0e7ff;
            max-width: 300px;
            z-index: 1000;
            pointer-events: none;
            transition: opacity 0.2s ease-in-out;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            font-size: 0.875rem;
        }
        #card-popup h3 {
            font-family: 'Orbitron', sans-serif;
            color: #facc15; /* Yellow title */
            font-weight: bold;
            font-size: 1.125rem;
        }
        #card-popup p {
            margin-top: 0.5rem;
        }
        #card-popup-stats {
            font-family: 'Orbitron', sans-serif;
            color: #facc15; /* Yellow stats */
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <!-- Yu-Gi-Oh! Themed Home Button -->
    <a href="index.html" class="ygo-home-button" title="Return to Archetype Nexus">
        <i class="fas fa-home"></i>
        <span class="ygo-home-text">NEXUS</span>
    </a>
    <!-- Card Popup -->
    <div id="card-popup"></div>

    <div class="container mx-auto">
        <!-- Title Section -->
        <header class="banner-header text-center">
            <canvas id="lightning-canvas"></canvas>
            <h1 class="text-3xl md:text-5xl font-extrabold text-white mb-2">RAIGEKI</h1>
            <p class="text-lg md:text-xl text-yellow-200">A Strategic Deep Dive into a Thematic Series</p>
        </header>

        <!-- Executive Summary Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn">
            <div class="card p-6">
                <h2 class="text-xl md:text-2xl font-bold text-white mb-4">Executive Summary: Deconstructing "Raigeki"</h2>
                <p class="text-indigo-200">
                    While several distinct cards share the "Raigeki" name, they do not constitute a functional, synergistic archetype. An archetype is defined by cards that specifically mention each other, creating internal synergy and searchability. The "Raigeki" cards lack this interconnectedness; they are of different card types, possess wildly different activation conditions, and offer no mutual support.
                </p>
                <p class="text-indigo-200 mt-4">
                    They are, instead, a <strong class="text-accent font-bold">thematic series</strong>. The name "Raigeki," meaning "Thunder Strike," is used as branding to signify a powerful, often destructive effect. This report provides an expert examination of each card in the series as an individual strategic tool.
                </p>
            </div>
        </section>

        <!-- The "Raigeki" Series Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.2s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-8 text-center heading-underline">The "Raigeki" Series: Card by Card</h2>
            
            <!-- Raigeki -->
            <div class="card p-6 combo-step-card w-full max-w-4xl mx-auto mb-6">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                    <div id="raigeki-img-container" class="card-image-container flex-shrink-0 card-placeholder">Raigeki</div>
                    <div>
                        <h3 class="text-2xl font-bold text-accent mb-2">Raigeki</h3>
                        <p class="text-indigo-200"><strong class="text-white">Normal Spell</strong><br><strong>Effect:</strong> "Destroy all monsters your opponent controls".</p>
                        <p class="text-indigo-200 mt-2">The iconic, costless board wipe. Its role is to be a premier "board breaker" for the player going second. Its non-targeting destruction is crucial, allowing it to destroy monsters that are immune to targeting. However, its power is checked by modern monster protection (destruction immunity, "unaffected") and omni-negates.</p>
                    </div>
                </div>
            </div>

            <!-- Raigeki Break -->
            <div class="card p-6 combo-step-card w-full max-w-4xl mx-auto mb-6">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                    <div id="raigeki-break-img-container" class="card-image-container flex-shrink-0 card-placeholder">Raigeki Break</div>
                    <div>
                        <h3 class="text-2xl font-bold text-accent mb-2">Raigeki Break</h3>
                        <p class="text-indigo-200"><strong class="text-white">Normal Trap</strong><br><strong>Effect:</strong> "Discard 1 card, then target 1 card on the field; destroy it".</p>
                        <p class="text-indigo-200 mt-2">A flexible piece of disruption that can destroy *any* card (monster or backrow). Its "cost" of discarding is its greatest strength in modern Yu-Gi-Oh!, turning it into a <strong class="text-accent font-bold">catalyst</strong> for decks like Dark World, Fabled, or Shaddoll that trigger effects upon being discarded.</p>
                    </div>
                </div>
            </div>

            <!-- Crystal Raigeki -->
            <div class="card p-6 combo-step-card w-full max-w-4xl mx-auto mb-6">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                    <div id="crystal-raigeki-img-container" class="card-image-container flex-shrink-0 card-placeholder">Crystal Raigeki</div>
                    <div>
                        <h3 class="text-2xl font-bold text-accent mb-2">Crystal Raigeki</h3>
                        <p class="text-indigo-200"><strong class="text-white">Normal Trap</strong><br><strong>Effect:</strong> "Send 1 'Crystal Beast' card from your Spell & Trap Zone to the GY, then target 1 card your opponent controls; destroy that target".</p>
                        <p class="text-indigo-200 mt-2">A perfect example of a thematic name integrated into a specific archetype. This card is completely non-functional outside of a "Crystal Beast" deck, where its cost is inherently synergistic with the archetype's mechanic of placing monsters in the Spell/Trap Zone.</p>
                    </div>
                </div>
            </div>

            <!-- Anti Raigeki -->
            <div class="card p-6 combo-step-card w-full max-w-4xl mx-auto mb-6">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                    <div id="anti-raigeki-img-container" class="card-image-container flex-shrink-0 card-placeholder">Anti Raigeki</div>
                    <div>
                        <h3 class="text-2xl font-bold text-accent mb-2">Anti Raigeki</h3>
                        <p class="text-indigo-200"><strong class="text-white">Normal Trap</strong><br><strong>Effect:</strong> "When your opponent activates 'Raigeki': Negate its effect, and if you do, destroy all monsters your opponent controls".</p>
                        <p class="text-indigo-200 mt-2">The definition of a "silver bullet" card. It is a high-risk, high-reward Side Deck option. If "Raigeki" is popular in the meta, this card is a devastating counter. If not, it's a completely dead card in hand. Its existence alone adds a small psychological element to activating "Raigeki".</p>
                    </div>
                </div>
            </div>

            <!-- Raigeki Bottle -->
            <div class="card p-6 combo-step-card w-full max-w-4xl mx-auto mb-6">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                    <div id="raigeki-bottle-img-container" class="card-image-container flex-shrink-0 card-placeholder">Raigeki Bottle</div>
                    <div>
                        <h3 class="text-2xl font-bold text-accent mb-2">Raigeki Bottle</h3>
                        <p class="text-indigo-200"><strong class="text-white">Continuous Trap</strong><br><strong>Effect:</strong> "Each time a monster you control declares an attack, place 1 Thunder Counter... send this card with 4 or more... destroy all monsters your opponent controls".</p>
                        <p class="text-indigo-200 mt-2">A heavily "balanced" and underpowered version of the effect. It is far too slow, vulnerable, and telegraphed for modern play. It requires four separate attacks while remaining on the field, making it impractical for competitive use.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Accessibility Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.4s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">Accessibility & Searchability</h2>
            <p class="text-indigo-200 mb-8 text-center max-w-2xl mx-auto">
                Because this is a thematic series, no "Raigeki" searcher exists. However, the Normal Spell "Raigeki" can be searched by some of the most powerful generic "tutor" cards in the game, while the Traps are intentionally left unsearchable.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mx-auto max-w-4xl">
                <!-- Triple Tactics Thrust -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">Triple Tactics Thrust</h3>
                    <div class="flex justify-center mb-4">
                        <div id="thrust-img-container" class="card-image-container card-placeholder">Triple Tactics Thrust</div>
                    </div>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><strong class="text-accent">Premier Tutor:</strong> The main way to search "Raigeki" in the modern game.</li>
                        <li><strong class="text-accent">Condition:</strong> Activates if your opponent used a monster effect on your turn (almost guaranteed when going second).</li>
                        <li><strong class="text-accent">Application:</strong> A "Going Second" deck can activate Thrust, add "Raigeki" to hand, and immediately activate it to clear the board.</li>
                    </ul>
                </div>
                <!-- Left Arm Offering -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">Left Arm Offering</h3>
                    <div class="flex justify-center mb-4">
                        <div id="left-arm-img-container" class="card-image-container card-placeholder">Left Arm Offering</div>
                    </div>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><strong class="text-accent">High-Risk Tutor:</strong> An "all-in" desperation play.</li>
                        <li><strong class="text-accent">Cost:</strong> Requires you to banish your *entire hand* (min. 2 other cards) to search any Spell.</li>
                        <li><strong class="text-accent">Application:</strong> Used as a last resort to find "Raigeki" when facing an unbeatable board, hoping the single card is enough to win.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Strategic Analysis Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.6s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">Strategic Analysis & Application</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Strengths (Going Second) -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-green-400 mb-4">Strengths: The "Going Second" Tool</h3>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><span class="pro-icon"><i class="fas fa-check-circle"></i></span> <strong class="text-green-300">"Raigeki" as Enabler:</strong> Used in "Going Second" OTK decks (like Cyber Dragon, Numeron) to clear the board and enable a game-ending push.</li>
                        <li><span class="pro-icon"><i class="fas fa-check-circle"></i></span> <strong class="text-green-300">Non-Targeting:</strong> "Raigeki" bypasses "cannot be targeted" protection, a key advantage over many other removal cards.</li>
                        <li><span class="pro-icon"><i class="fas fa-check-circle"></i></span> <strong class="text-green-300"> Alternatives:</strong> Often played alongside <strong class="text-accent">Lightning Storm</strong> (more flexible, hits backrow) and <strong class="text-accent">Evenly Matched</strong> (bypasses all protection).</li>
                    </ul>
                </div>
                <!-- Weaknesses (Counters) -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-red-400 mb-4">Weaknesses: Counters & Resistance</h3>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><span class="con-icon"><i class="fas fa-times-circle"></i></span> <strong class="text-red-300">Negation:</strong> Easily stopped by common "omni-negate" boss monsters like <strong class="text-accent">Baronne de Fleur</strong> or Counter Traps like <strong class="text-accent">Solemn Judgment</strong>.</li>
                        <li><span class="con-icon"><i class="fas fa-times-circle"></i></span> <strong class="text-red-300">Immunity:</strong> Rendered useless against monsters that "cannot be destroyed by card effects" (e.g., Majespecters) or are "unaffected by other card effects."</li>
                        <li><span class="con-icon"><i class="fas fa-times-circle"></i></span> <strong class="text-red-300">"Floating":</strong> Activating "Raigeki" against decks like Unchained, Fire Kings, or Burning Abyss is often a *bad* play, as it triggers all their Graveyard effects and benefits the opponent.</li>
                    </ul>
                </div>
                <!-- Tech (Discard Engine) -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4">Tech: The "Discard Engine" Tool</h3>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><span class="neutral-icon"><i class="fas fa-atom"></i></span> <strong class="text-accent">"Raigeki Break" as Catalyst:</strong> The card's true power. The discard "cost" is used to *trigger* the effects of archetypes that want their cards in the GY.</li>
                        <li><span class="neutral-icon"><i class="fas fa-atom"></i></span> <strong class="text-accent">Dark World:</strong> Discarding "Grapha" for "Raigeki Break" destroys a card, then Grapha's effect triggers to destroy *another* card.</li>
                        <li><span class="neutral-icon"><i class="fas fa-atom"></i></span> <strong class="text-accent">Fabled / Shaddoll:</strong> Discarding a "Fabled" monster Special Summons it. Discarding a "Shaddoll" triggers its GY effect. "Raigeki Break" becomes both removal and a combo starter.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- TCG Banlist Status Section (DYNAMIC) -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.8s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">Current TCG Banlist Status (Live API Check)</h2>
            <div class="card p-6">
                <p class="text-indigo-200 mb-4 text-center">
                    This section is populated live by fetching data from the <strong class="text-accent">YGOPRODeck API</strong>, as requested. It checks the status of all cards mentioned in this report.
                </p>
                <div id="banlist-loader" class="text-center text-accent">
                    <i class="fas fa-spinner fa-spin fa-2x"></i>
                    <p class="mt-2">Fetching live banlist data...</p>
                </div>
                <!-- Dynamic content will be injected here -->
                <div id="banlist-content" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <!-- Forbidden -->
                        <div class="card combo-step-card p-4 bg-red-900 border-red-500">
                            <h4 class="text-lg font-bold text-red-300 mb-2">Forbidden (0)</h4>
                            <ul id="forbidden-cards-list" class="list-disc list-inside space-y-1 text-sm text-red-200">
                                <!-- JS will populate this -->
                            </ul>
                        </div>
                        <!-- Limited -->
                        <div class="card combo-step-card p-4 bg-yellow-900 border-yellow-500">
                            <h4 class="text-lg font-bold text-yellow-300 mb-2">Limited (1)</h4>
                            <ul id="limited-cards-list" class="list-disc list-inside space-y-1 text-sm text-yellow-200">
                                <!-- JS will populate this -->
                            </ul>
                        </div>
                        <!-- Semi-Limited -->
                        <div class="card combo-step-card p-4 bg-blue-900 border-blue-500">
                            <h4 class="text-lg font-bold text-blue-300 mb-2">Semi-Limited (2)</h4>
                            <ul id="semi-limited-cards-list" class="list-disc list-inside space-y-1 text-sm text-blue-200">
                                <!-- JS will populate this -->
                            </ul>
                        </div>
                        <!-- Unlimited -->
                        <div class="card combo-step-card p-4 bg-green-900 border-green-500">
                            <h4 class="text-lg font-bold text-green-300 mb-2">Unlimited (3)</h4>
                            <ul id="unlimited-cards-list" class="list-disc list-inside space-y-1 text-sm text-green-200">
                                <!-- JS will populate this -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- RAIGEKI LIGHTNING ANIMATION ---
            const canvas = document.getElementById('lightning-canvas');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                let bolts = [];

                const setCanvasSize = () => {
                    canvas.width = canvas.offsetWidth;
                    canvas.height = canvas.offsetHeight;
                };

                class Bolt {
                    constructor(x, y, segments) {
                        this.x = x;
                        this.y = y;
                        this.segments = segments;
                        this.life = 10 + Math.random() * 10; // Frames to live
                        this.opacity = 1;
                    }

                    draw() {
                        ctx.strokeStyle = `rgba(250, 204, 21, ${this.opacity})`; // Yellow
                        ctx.lineWidth = 1 + Math.random() * 2;
                        ctx.beginPath();
                        ctx.moveTo(this.x, this.y);
                        
                        let currentX = this.x;
                        let currentY = this.y;

                        for (let i = 0; i < this.segments; i++) {
                            let nextX = currentX + (Math.random() * 20 - 10);
                            let nextY = currentY + (Math.random() * 15 + 5);
                            if (i === this.segments - 1) {
                                nextY = currentY + (Math.random() * 10 + 10); // End further down
                            }
                            ctx.lineTo(nextX, nextY);
                            currentX = nextX;
                            currentY = nextY;
                        }
                        ctx.stroke();
                    }

                    update() {
                        this.life--;
                        this.opacity = this.life / 10;
                    }
                }

                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // Create new bolts randomly
                    if (Math.random() < 0.1) {
                        bolts.push(new Bolt(Math.random() * canvas.width, 0, 10 + Math.floor(Math.random() * 10)));
                    }

                    // Update and draw bolts
                    for (let i = bolts.length - 1; i >= 0; i--) {
                        bolts[i].update();
                        bolts[i].draw();
                        if (bolts[i].life <= 0) {
                            bolts.splice(i, 1);
                        }
                    }
                    
                    requestAnimationFrame(animate);
                }

                setCanvasSize();
                animate();
                window.addEventListener('resize', setCanvasSize);
            }

            // --- CARD IMAGE FETCHER SCRIPT ---
            // This uses the shared CardLoader module (assumed to be at assets/js/card-loader.js)
            CardLoader.loadCards({
                'raigeki-img-container': 'Raigeki',
                'raigeki-break-img-container': 'Raigeki Break',
                'crystal-raigeki-img-container': 'Crystal Raigeki',
                'anti-raigeki-img-container': 'Anti Raigeki',
                'raigeki-bottle-img-container': 'Raigeki Bottle',
                'thrust-img-container': 'Triple Tactics Thrust',
                'left-arm-img-container': 'Left Arm Offering',
                'baronne-img-container': 'Baronne de Fleur',
                'solemn-img-container': 'Solemn Judgment'
                // We'll add the board breakers to the banlist check instead of loading images for them
            });

            // --- DYNAMIC BANLIST FETCHER ---
            async function fetchBanlist() {
                const apiUrl = 'https://db.ygoprodeck.com/api/v7/cardinfo.php?banlist=TCG';
                const loader = document.getElementById('banlist-loader');
                const content = document.getElementById('banlist-content');
                
                // Key cards from the DOCX to check
                const cardsToTrack = [
                    'Raigeki', 'Raigeki Break', 'Crystal Raigeki', 'Anti Raigeki', 'Raigeki Bottle',
                    'Triple Tactics Thrust', 'Left Arm Offering', 'Dark Hole', 'Lightning Storm', 
                    'Evenly Matched', 'Baronne de Fleur', 'Solemn Judgment'
                ];

                const lists = {
                    forbidden: document.getElementById('forbidden-cards-list'),
                    limited: document.getElementById('limited-cards-list'),
                    semiLimited: document.getElementById('semi-limited-cards-list'),
                    unlimited: document.getElementById('unlimited-cards-list'),
                };

                const statusMap = {
                    "Forbidden": [],
                    "Limited": [],
                    "Semi-Limited": []
                };

                try {
                    const response = await fetch(apiUrl);
                    if (!response.ok) throw new Error(`API error: ${response.status}`);
                    
                    const data = await response.json();
                    const banlistData = data.data;

                    // 1. Process the entire API response to find all banned cards
                    for (const card of banlistData) {
                        if (card.banlist_info && card.banlist_info.ban_tcg) {
                            const status = card.banlist_info.ban_tcg;
                            if (status === "Forbidden") {
                                statusMap["Forbidden"].push(card.name);
                            } else if (status === "Limited") {
                                statusMap["Limited"].push(card.name);
                            } else if (status === "Semi-Limited") {
                                statusMap["Semi-Limited"].push(card.name);
                            }
                        }
                    }

                    // 2. Check our specific cardsToTrack against the processed lists
                    const trackedUnlimited = [];
                    for (const cardName of cardsToTrack) {
                        if (statusMap["Forbidden"].includes(cardName)) {
                            lists.forbidden.innerHTML += `<li>${cardName}</li>`;
                        } else if (statusMap["Limited"].includes(cardName)) {
                            lists.limited.innerHTML += `<li>${cardName}</li>`;
                        } else if (statusMap["Semi-Limited"].includes(cardName)) {
                            lists.semiLimited.innerHTML += `<li>${cardName}</li>`;
                        } else {
                            trackedUnlimited.push(cardName);
                        }
                    }

                    // 3. Add all tracked unlimited cards
                    if (trackedUnlimited.length > 0) {
                        lists.unlimited.innerHTML = trackedUnlimited.map(name => `<li>${name}</li>`).join('');
                    } else {
                        lists.unlimited.innerHTML = `<li>(None of the tracked cards)</li>`;
                    }
                    
                    // Handle empty lists
                    if (!lists.forbidden.innerHTML) lists.forbidden.innerHTML = `<li>(None of the tracked cards)</li>`;
                    if (!lists.limited.innerHTML) lists.limited.innerHTML = `<li>(None of the tracked cards)</li>`;
                    if (!lists.semiLimited.innerHTML) lists.semiLimited.innerHTML = `<li>(None of the tracked cards)</li>`;

                    // Show content
                    loader.classList.add('hidden');
                    content.classList.remove('hidden');

                } catch (error) {
                    console.error('Failed to fetch banlist:', error);
                    loader.innerHTML = '<p class="text-red-400">Failed to load banlist data. Please try refreshing.</p>';
                }
            }

            // Run the banlist fetch
            fetchBanlist();
        });
    </script>
</body>
</html>
