<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mist Valley Archetype Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="assets/js/card-loader.js"></script> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0F172A; /* Dark Slate Blue */
            color: #E2E8F0; /* Slate Gray */
        }
        .container {
            max-width: 1024px;
        }
        .card {
            background-color: #1E293B; /* Darker Slate */
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
            border: 1px solid #334155;
        }
        .combo-step-card {
            background-color: #283447;
            border: 1px solid #475569;
        }
        .pro-con-card {
            background-color: #283447;
            border: 1px solid #475569;
        }
        .card-image-container {
            width: 100%;
            max-width: 180px;
            flex-shrink: 0;
        }
        .card-image {
            width: 100%;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        .card-placeholder {
            background-color: #334155;
            color: #CBD5E1;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.75rem;
            line-height: 1rem;
            font-weight: bold;
            height: 100%;
            min-height: 128px;
            border-radius: 0.5rem;
            padding: 0.5rem;
            cursor: pointer;
        }
        .pro-icon { color: #34D399; }
        .con-icon { color: #F87171; }
        .neutral-icon { color: #60A5FA; }
        .text-accent { color: #67E8F9; } /* Cyan */
        .arrow-color { color: #38BDF8; } /* Sky Blue */
        
        .lore-link {
            color: #67E8F9;
            font-weight: bold;
            text-decoration: none;
            border-bottom: 1px dotted #67E8F9;
            transition: color 0.3s;
        }
        .lore-link:hover {
            color: #fff;
        }
        
        /* --- Animated Banner --- */
        .banner-header {
            position: relative;
            min-height: 160px;
            background-color: #0F172A;
            border-radius: 1rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            margin-bottom: 2.5rem;
            border: 1px solid #334155;
        }

        #wind-banner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        .banner-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle, rgba(15, 23, 42, 0.4) 0%, rgba(15, 23, 42, 0.9) 80%);
            z-index: 2;
        }
        .banner-content {
            position: relative;
            z-index: 3;
            text-align: center;
        }
        .banner-title {
            font-family: 'Cinzel', serif;
            font-size: 2.8rem;
            color: #E2E8F0;
            text-shadow: 0 0 10px rgba(103, 232, 249, 0.5), 0 0 20px rgba(56, 189, 248, 0.3);
        }
        .banner-subtitle {
            font-size: 1.1rem;
            color: #94A3B8;
        }
        #card-popup {
            position: fixed;
            background: rgba(51, 65, 85, 0.95);
            border: 2px solid #67E8F9;
            border-radius: 0.5rem;
            padding: 1rem;
            max-width: 300px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #CBD5E1;
        }
        #card-popup.show {
            opacity: 1;
            pointer-events: auto;
        }
        #card-popup img {
            max-width: 100%;
            height: auto;
            border-radius: 0.25rem;
            margin-bottom: 0.5rem;
        }
        #card-popup h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.1rem;
            font-weight: bold;
            color: #67E8F9;
        }
        #card-popup p {
            margin: 0.25rem 0;
            font-size: 0.9rem;
            line-height: 1.4;
            word-wrap: break-word;
        }
        #card-popup .type {
            color: #34D399;
            font-weight: bold;
        }
        #card-popup .stats {
            color: #F87171;
        }
    </style>
</head>
<body class="p-4 md:p-8">

<div class="container mx-auto">
        <!-- Banner -->
        <header class="banner-header">
            <canvas id="wind-banner"></canvas>
            <div class="banner-content">
                <h1 class="banner-title">Mist Valley</h1>
                <p class="banner-subtitle">A Strategic Deep Dive into the Eye of the Storm</p>
            </div>
        </header>

        <!-- Executive Summary -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.2s;">
            <div class="card p-6">
                <h2 class="text-xl md:text-2xl font-bold text-white mb-4">Executive Summary</h2>
                <p class="text-slate-300">
                    The <strong class="text-accent font-bold">"Mist Valley"</strong> archetype is a collection of WIND monsters built around a unique and counter-intuitive mechanic: returning cards from its own field to the hand. This "bounce" strategy appears to be a disadvantage at first, but the solution to this puzzle lies in <a href="https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&keyword=mist+valley" target="_blank" class="lore-link">a powerful suite of cards</a> designed not just to mitigate this cost, but to transform it into a potent engine for generating advantage and establishing a near-unbreakable lockdown. As the archetype lacks internal searchers, its true potential is only unlocked in <strong class="text-yellow-400">hybrid builds</strong>.
                </p>
            </div>
        </section>

        <!-- Core Philosophy -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.4s;">
             <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">The Core Philosophy: The Art of the Bounce</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-white mb-2">Enablers: Starting the Cyclone</h3>
                    <p class="text-slate-300">Cards like <strong class="text-accent">Mist Valley Falcon</strong> (in pure builds) or external cards like <strong class="text-accent">Harpie Dancer</strong> initiate the bounce effect, creating an opportunity to trigger a Payoff effect.</p>
                </div>
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-white mb-2">Payoffs: Reaping the Whirlwind</h3>
                    <p class="text-slate-300">Cards like <strong class="text-accent">Mist Valley Thunderbird</strong> and <strong class="text-accent">Divine Wind of Mist Valley</strong> benefit from being bounced or seeing another card bounced, creating a cyclical flow of resources that defines the deck's ideal game state.</p>
                </div>
            </div>
        </section>

        <!-- Key Cards -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.6s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">The Flock and the Gale: Key Cards</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Mist Valley Apex Avian -->
                <div class="card p-6">
                    <h3 class="text-lg font-bold text-accent mb-2">Mist Valley Apex Avian</h3>
                    <p class="text-sm text-slate-300">The ultimate goal. A powerful boss monster with a repeatable, <strong class="text-yellow-400">Once Per Chain</strong> omni-negation effect that fuels the archetype's lockdown strategy.</p>
                </div>
                <!-- Mist Valley Thunderbird -->
                <div class="card p-6">
                    <h3 class="text-lg font-bold text-accent mb-2">Mist Valley Thunderbird</h3>
                    <p class="text-sm text-slate-300">The lynchpin. When returned to the hand, it immediately Special Summons itself (not once per turn), providing a perpetually recurring target for bounce effects.</p>
                </div>
                <!-- Divine Wind of Mist Valley -->
                <div class="card p-6">
                    <h3 class="text-lg font-bold text-accent mb-2">Divine Wind of Mist Valley</h3>
                    <p class="text-sm text-slate-300">The engine's catalyst. This Field Spell Special Summons a WIND monster from the Deck when another is bounced, turning a cost into a massive gain in advantage. <strong class="text-yellow-400">(Currently Limited in the TCG)</strong></p>
                </div>
            </div>
        </section>

        <!-- End Board: The Infinite Negate Lock -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.8s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">The End Board: The Infinite Negate Lock</h2>
            <div class="card p-6">
                 <p class="text-slate-300 mb-6 text-center max-w-3xl mx-auto">The pinnacle of Mist Valley strategy is a nearly unbreakable board state known as the "infinite negate lock." This combination leverages the core mechanics to create a recurring source of omni-negation that can shut down an opponent's entire turn.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="flex flex-col space-y-4">
                        <div class="flex items-center gap-4 p-3 combo-step-card rounded-lg">
                            <div id="apex-avian-img-container" class="w-24 flex-shrink-0 card-placeholder">Mist Valley Apex Avian</div>
                            <div>
                                <h4 class="font-bold text-white">Mist Valley Apex Avian</h4>
                                <p class="text-sm text-slate-300">The core omni-negate, ready to shut down any card or effect your opponent activates.</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 p-3 combo-step-card rounded-lg">
                           <div id="thunderbird-img-container" class="w-24 flex-shrink-0 card-placeholder">Mist Valley Thunderbird</div>
                            <div>
                                <h4 class="font-bold text-white">Mist Valley Thunderbird</h4>
                                <p class="text-sm text-slate-300">The recurring fuel. Apex Avian bounces this card to pay its cost, and it returns to the field, ready to be bounced again.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-accent mb-2">How it Works:</h3>
                        <ol class="list-decimal list-inside space-y-2 text-slate-300">
                            <li>Opponent activates a card or effect.</li>
                            <li>Chain <strong class="text-accent">Apex Avian's</strong> effect, targeting <strong class="text-accent">Thunderbird</strong>.</li>
                            <li><strong class="text-accent">Thunderbird</strong> returns to hand, the opponent's effect is negated and destroyed.</li>
                             <li>After the chain resolves, <strong class="text-accent">Thunderbird's</strong> mandatory effect triggers, Special Summoning itself back to the field.</li>
                            <li>The board is reset, ready to negate the <strong class="text-yellow-400">next effect in a new chain</strong>.</li>
                        </ol>
                        <p class="text-xs text-slate-400 mt-4"><strong>Note:</strong> Historically, this lock was consistently assembled using the now-banned <strong class="text-red-400">Union Carrier</strong>. Modern strategies rely on hybrid engines (like Harpies/Simorgh) to summon the pieces from the deck.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pros and Cons -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 1s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Competitive Analysis</h2>
             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Strengths -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-green-400 mb-4">Strengths</h3>
                    <ul class="list-disc list-inside space-y-2 text-slate-300">
                        <li><span class="pro-icon"><i class="fas fa-lock"></i></span> <strong class="text-green-400">Powerful Lockdown:</strong> The Apex Avian lock is one of the most resilient and difficult-to-break end boards in the game when established.</li>
                        <li><span class="pro-icon"><i class="fas fa-cogs"></i></span> <strong class="text-green-400">Parasitic Engine:</strong> The core combo pieces are compact and can be "grafted" onto stronger, more consistent archetypes (like Simorgh or Harpies) as a win condition.</li>
                    </ul>
                </div>
                <!-- Weaknesses -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-red-400 mb-4">Weaknesses</h3>
                    <ul class="list-disc list-inside space-y-2 text-slate-300">
                        <li><span class="con-icon"><i class="fas fa-search-minus"></i></span> <strong class="text-red-400">No Internal Searchers:</strong> The archetype lacks any in-theme way to search its key combo pieces, making pure builds incredibly inconsistent.</li>
                        <li><span class="con-icon"><i class="fas fa-hand-paper"></i></span> <strong class="text-red-400">Fragile Combos:</strong> The strategies used to assemble the lock are often vulnerable to hand traps like <strong class="text-accent">Ash Blossom</strong> or <strong class="text-accent">Nibiru</strong>.</li>
                        <li><span class="con-icon"><i class="fas fa-exclamation-triangle"></i></span> <strong class="text-red-400">Board Breaker Vulnerability:</strong> Cards like <strong class="text-accent">Dark Ruler No More</strong> or <strong class="text-accent">Kaijus</strong> can easily dismantle the established lock.</li>
                    </ul>
                </div>
                <!-- External Synergies -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4">External Synergies</h3>
                     <ul class="list-disc list-inside space-y-2 text-slate-300">
                        <li><span class="neutral-icon"><i class="fas fa-feather-alt"></i></span> <strong class="text-accent">Harpie Engine:</strong> The most potent hybrid. Using <strong class="text-accent">Harpie Channeler</strong>, <strong class="text-accent">Harpie Dancer</strong>, and <strong class="text-accent">Harpie's Pet Dragon - FFB</strong> allows the deck to swarm the field, trigger <strong class="text-accent">Divine Wind</strong>, and "Turbo" out <strong class="text-accent">Simorgh, Bird of Sovereignty</strong>, which summons Apex Avian directly from the deck.</li>
                        <li><span class="neutral-icon"><i class="fas fa-wand-magic-sparkles"></i></span> <strong class="text-accent">Swallow's Nest:</strong> A critical utility spell. It can dodge targeting negation (like <strong class="text-accent">Effect Veiler</strong>) by Tributing an activated monster for cost, or simply swap a less useful Winged Beast for a key starter like <strong class="text-accent">Harpie Channeler</strong>.</li>
                        <li><span class="neutral-icon"><i class="fas fa-cogs"></i></span> <strong class="text-accent">Genex Ally Birdman:</strong> A key "Combo Extender." This Tuner Special Summons itself by bouncing a WIND monster, which can trigger <strong class="text-accent">Divine Wind</strong> or bounce <strong class="text-accent">Thunderbird</strong> for a free body on board.</li>
                        <li><span class="neutral-icon"><i class="fas fa-dragon"></i></span> <strong class="text-accent">Dragunity:</strong> <strong class="text-accent">Mist Valley Baby Roc</strong> is a key combo extender in Dragunity decks, showcasing the archetype's utility outside its main strategy.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- TCG Banlist Status Section -->
        <section class="mb-10 md:mb-16" id="banlist-section-container">
            <h2 class="text-2xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">Live TCG Banlist Status</h2>
            <div id="banlist-status" class="card p-6">
                <!-- Banlist content will be dynamically generated here -->
            </div>
        </section>

</div>

<!-- 
    This script block now *only* contains the Wind Banner animation logic,
    as all other functions have been moved to 'assets/js/card-loader.js'.
-->
<script>
    document.addEventListener('DOMContentLoaded', async () => {
        // --- Wind Banner Animation ---
        const canvas = document.getElementById('wind-banner');
        if (canvas) {
            const ctx = canvas.getContext('2d');
            let particles = [];
            
            const setCanvasSize = () => {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
            };

            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = canvas.height + Math.random() * 100;
                    this.speed = Math.random() * 2 + 1;
                    this.size = Math.random() * 1.5 + 0.5;
                    this.opacity = Math.random() * 0.5 + 0.2;
                }
                update() {
                    this.y -= this.speed;
                    this.x += Math.sin(this.y / 50) * 2;
                    if (this.y < -10) {
                        this.y = canvas.height + 10;
                        this.x = Math.random() * canvas.width;
                    }
                }
                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(103, 232, 249, ${this.opacity})`;
                    ctx.fill();
                }
            }

            function initParticles() {
                particles = [];
                const particleCount = (canvas.width * canvas.height) / 10000;
                for (let i = 0; i < particleCount; i++) {
                    particles.push(new Particle());
                }
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    p.update();
                    p.draw();
                });
                requestAnimationFrame(animate);
            }
            
            setCanvasSize();
            initParticles();
            animate();
            window.addEventListener('resize', () => {
                setCanvasSize();
                initParticles();
            });
        }
    });
</script>

<!-- 
    This new script block calls the functions from the loaded 'assets/js/card-loader.js'.
    This separation of concerns is what you were asking for.
-->
<script>
    document.addEventListener('DOMContentLoaded', async () => {
        // Wait for the CardLoader object to be available
        if (CardLoader) {
            // --- Render Banlist Section ---
            await CardLoader.renderBanlistSection('banlist-status', [
                'Mist Valley Apex Avian',
                'Mist Valley Thunderbird',
                'Divine Wind of Mist Valley',
                'Union Carrier', // For historical context
                'Simorgh, Bird of Sovereignty', // Important for combos
                'Harpie Dancer',
                'Genex Ally Birdman',
                'Harpie Channeler',
                'Swallow\'s Nest'
            ], {
                archetypeName: 'Mist Valley',
                relatedCards: [
                    'Harpie Harpist',
                    'Harpie Lady',
                    'Icarus Attack',
                    'Harpie\'s Feather Duster'
                ],
                archetypeTraits: {
                    coreMechanic: 'Mist Valley is a WIND Winged Beast archetype that returns its own cards from field to hand to trigger effects and enable powerful combos with Apex Avian.',
                    supportReliance: 'The deck relies on WIND support and Divine Wind of Mist Valley to convert bounces into advantage.',
                    adaptability: 'Mist Valley can function as a lockdown strategy with Apex Avian or as an aggressive beatdown deck.',
                    resilience: 'At full power with all cards unrestricted, allowing maximum consistency and Apex Avian lockdown potential.',
                    keyLoss: 'With "Divine Wind" Limited and "Simorgh" & "Union Carrier" Forbidden, the deck is heavily reliant on hybrid engines.',
                    alternativeStrategy: 'Focus on Mist Valley Apex Avian with the Harpie/Simorgh engine to summon the lock pieces.'
                }
            });

            // --- Card Image Loading for Placeholders ---
            CardLoader.loadCards({
                'apex-avian-img-container': 'Mist Valley Apex Avian',
                'thunderbird-img-container': 'Mist Valley Thunderbird'
            });
        } else {
            console.error('CardLoader.js not found or failed to load. Make sure the file path is correct.');
        }
    });
</script>
    <div id="card-popup"></div>
</body>
</html>