<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Magician Archetype: The Ultimate Wizard's Grimoire</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="assets/js/card-loader.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --bg-deep-purple: #0c0b1e;
            --bg-indigo-dark: #1a183d;
            --bg-indigo-light: #24225a;
            --border-purple: #4c4a8a;
            --text-lavender: #e0e7ff;
            --text-accent-pink: #ec4899;
            --text-accent-purple: #a855f7;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-deep-purple);
            color: var(--text-lavender);
        }
        .section-title {
            font-family: 'Cinzel', serif;
        }
        .card {
            background-color: var(--bg-indigo-dark);
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-purple);
            transition: all 0.3s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(236, 72, 153, 0.2);
        }
        .card-placeholder {
            background-color: var(--bg-indigo-light);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.875rem;
            font-weight: bold;
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.5);
            min-height: 150px;
        }
        .text-accent { color: var(--text-accent-pink); }
        .text-accent-purple { color: var(--text-accent-purple); }
        
        /* Banner Styles */
        .banner {
            position: relative;
            height: 160px;
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 30%, #1e1b4b 60%, #0c0b1e 100%);
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 1rem;
            border: 3px solid #8b5cf6;
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.4), inset 0 0 50px rgba(168, 85, 247, 0.1);
            margin-bottom: 3rem;
        }
        .banner-content {
            z-index: 3;
            opacity: 0;
            animation: content-appear 1.5s ease-out 0.8s forwards;
        }
        .banner-title {
            font-size: 3rem;
            text-shadow: 0 0 15px rgba(139, 92, 246, 0.8), 0 0 30px rgba(168, 85, 247, 0.6);
        }
        .mystical-orb {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.8), transparent);
            opacity: 0;
            animation: orb-float 6s infinite ease-in-out;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.6);
        }
        .mystical-orb.orb1 { width: 40px; height: 40px; top: 20%; left: 15%; animation-delay: 0s; }
        .mystical-orb.orb2 { width: 30px; height: 30px; top: 70%; left: 20%; animation-delay: 2s; }
        .mystical-orb.orb3 { width: 35px; height: 35px; top: 30%; right: 15%; animation-delay: 4s; }
        .mystical-orb.orb4 { width: 25px; height: 25px; top: 75%; right: 25%; animation-delay: 1s; }
        
        @keyframes content-appear { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes orb-float {
            0%, 100% { transform: translateY(0px) scale(0.8); opacity: 0.4; }
            50% { transform: translateY(-20px) scale(1.1); opacity: 0.8; }
        }
        
        /* Table Styles */
        .styled-table {
            width: 100%;
            border-collapse: collapse;
        }
        .styled-table th, .styled-table td {
            padding: 12px 15px;
            text-align: left;
        }
        .styled-table thead tr {
            background-color: var(--bg-indigo-light);
            color: var(--text-lavender);
            border-bottom: 2px solid var(--text-accent-purple);
        }
        .styled-table tbody tr {
            border-bottom: 1px solid var(--border-purple);
        }
        .styled-table tbody tr:last-of-type {
            border-bottom: none;
        }
    </style>
</head>
<body class="p-4 md:p-8">
<div class="max-w-4xl mx-auto">
    <!-- Header -->
    <header class="banner">
        <div class="mystical-orb orb1"></div><div class="mystical-orb orb2"></div>
        <div class="mystical-orb orb3"></div><div class="mystical-orb orb4"></div>
        <div class="banner-content text-center">
            <h1 class="banner-title section-title">The Dark Magician</h1>
            <p class="text-indigo-200">The Ultimate Wizard's Grimoire</p>
        </div>
    </header>

    <!-- Archetype Identity -->
    <section class="mb-12">
        <div class="card p-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <div id="dm-img" class="card-placeholder w-40 h-60 mx-auto md:w-full md:h-auto">DM</div>
                <div class="md:col-span-2 text-center md:text-left">
                    <h2 class="section-title text-2xl font-bold text-white mb-3">Archetype Identity: The Resilient Control Deck</h2>
                    <p class="text-indigo-200 leading-relaxed">
                        Contrary to popular perception, the modern Dark Magician strategy is not about a single boss monster, but a methodical <strong class="text-accent">mid-range control</strong> game. The goal is to establish a resilient, recursive board state and out-grind the opponent through superior card advantage and recurring removal. Victory is achieved not through a single, decisive blow, but through a gradual accumulation of advantage that leaves the opponent with no resources to continue the duel.
                    </p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Core Engine -->
    <section class="mb-12">
        <h2 class="section-title text-3xl font-bold text-white mb-6 text-center">The Magician's Inner Circle</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Searchers -->
            <div class="card p-6">
                <h3 class="text-xl font-bold mb-4 flex items-center"><i class="fas fa-book-dead text-accent-purple mr-3"></i>Accessing the Arsenal</h3>
                <div class="space-y-4">
                    <p><strong class="text-accent">Magician's Rod:</strong> Your most crucial Normal Summon, seeking any Spell/Trap that names "Dark Magician."</p>
                    <p><strong class="text-accent">Illusion of Chaos:</strong> A hand-activated searcher for any core monster, kickstarting your plays by finding <strong class="font-semibold">Magicians' Souls</strong>.</p>
                    <p><strong class="text-accent">Soul Servant:</strong> Stacks your deck for a guaranteed search and provides explosive draw power from the Graveyard.</p>
                </div>
            </div>
            <!-- Enabler -->
            <div class="card p-6">
                <h3 class="text-xl font-bold mb-4 flex items-center"><i class="fas fa-bolt text-accent-purple mr-3"></i>Fueling the Magic</h3>
                <div class="flex flex-col sm:flex-row gap-4 items-center">
                    <div id="souls-img" class="card-placeholder w-32 h-48 flex-shrink-0">Souls</div>
                    <p><strong class="text-accent">Magicians' Souls:</strong> Arguably the deck's most vital monster. It sends Dark Magician from Deck to GY to summon itself, proving the ultimate wizard is often strongest as a resource in the Graveyard.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- The Control Lock -->
    <section class="mb-12">
        <h2 class="section-title text-3xl font-bold text-white mb-6 text-center">The Fortress of Spells</h2>
        <div class="card p-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                <div>
                    <h3 class="text-xl font-bold mb-4">The Circle/Soul Lock</h3>
                    <p class="mb-2"><strong class="text-accent">Dark Magical Circle:</strong> Your main disruption, banishing an opponent's card each time Dark Magician is summoned.</p>
                    <p><strong class="text-accent">Eternal Soul:</strong> Revives Dark Magician as a Quick Effect to trigger Circle on your opponent's turn, while making him immune to their card effects.</p>
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <div id="circle-img" class="card-placeholder h-56">Circle</div>
                    <div id="soul-img" class="card-placeholder h-56">Soul</div>
                </div>
            </div>
            <div class="mt-6 p-4 rounded-lg bg-red-900/30 border border-red-500/30">
                <h4 class="font-bold text-red-400 flex items-center"><i class="fas fa-exclamation-triangle mr-2"></i>The Glass Fortress</h4>
                <p class="text-sm text-red-200">This lock's power is balanced by <strong class="font-semibold">Eternal Soul's</strong> fatal flaw: if it leaves the field, it destroys all your monsters. Protecting it is paramount.</p>
            </div>
        </div>
    </section>

    <!-- Win Conditions -->
    <section class="mb-12">
        <h2 class="section-title text-3xl font-bold text-white mb-6 text-center">The Ultimate Incantations</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="card p-4 text-center"><div id="dragoon-img" class="card-placeholder mx-auto mb-2 w-32 h-48">Dragoon</div><h3 class="font-bold text-red-400">Power</h3><p class="text-sm">Summon <strong class="font-semibold">Red-Eyes Dark Dragoon</strong> for an untargetable, indestructible boss with an omni-negate.</p></div>
            <div class="card p-4 text-center"><div id="dmdk-img" class="card-placeholder mx-auto mb-2 w-32 h-48">DMD-K</div><h3 class="font-bold text-blue-400">Protection</h3><p class="text-sm">Summon <strong class="font-semibold">Dark Magician the Dragon Knight</strong> to shield your entire backrow, fortifying the Glass Fortress.</p></div>
            <div class="card p-4 text-center"><div id="tdm-img" class="card-placeholder mx-auto mb-2 w-32 h-48">The DMs</div><h3 class="font-bold text-purple-400">Advantage</h3><p class="text-sm">Summon <strong class="font-semibold">The Dark Magicians</strong> to draw cards whenever Spells/Traps are activated.</p></div>
        </div>
    </section>
    
    <!-- Combo Lines -->
    <section class="mb-12">
        <h2 class="section-title text-3xl font-bold text-white mb-6 text-center">Mastering the Combo Lines</h2>
        <div class="card p-6">
            <h3 class="text-xl font-bold mb-4">Foundational 2-Card Interactions</h3>
            <div class="overflow-x-auto">
                <table class="styled-table text-sm">
                    <thead>
                        <tr>
                            <th>Starter Cards</th>
                            <th>Key Interaction</th>
                            <th>Resulting Advantage</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Prep of Rites</strong> + Discard</td>
                            <td>Prep searches IoC, which searches Souls. Souls sends DM to GY and summons itself.</td>
                            <td>1 monster on field, DM in GY.</td>
                        </tr>
                        <tr>
                            <td><strong>Magician's Rod</strong> + <strong>Souls</strong></td>
                            <td>Rod searches Circle. Souls sends DM to GY and summons itself.</td>
                            <td>2 monsters on field, DM in GY.</td>
                        </tr>
                        <tr>
                            <td><strong>Soul Servant</strong> + <strong>Souls</strong></td>
                            <td>Souls sends DM to GY. Servant stacks Circle. Souls draws the Circle.</td>
                            <td>DM in GY, Circle in hand.</td>
                        </tr>
                        <tr>
                            <td><strong>Red-Eyes Fusion</strong></td>
                            <td>Activate to summon Dragoon using materials from the Deck.</td>
                            <td>1 omni-negate boss monster.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Analysis & Banlist -->
    <section class="mb-12">
        <h2 class="section-title text-3xl font-bold text-white mb-6 text-center">Strategic Analysis</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Strengths & Weaknesses -->
            <div class="space-y-6">
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-green-400 mb-2"><i class="fas fa-star mr-2"></i>Strengths</h3>
                    <ul class="list-disc list-inside text-sm space-y-1">
                        <li><strong>High Consistency:</strong> Layered searchers provide reliable access to core plays.</li>
                        <li><strong>Powerful Removal:</strong> Non-destruction banishing from Dark Magical Circle.</li>
                        <li><strong>Strong Protection:</strong> The Dragon Knight + Soul lock is difficult to out.</li>
                    </ul>
                </div>
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-red-400 mb-2"><i class="fas fa-exclamation-triangle mr-2"></i>Vulnerabilities</h3>
                    <ul class="list-disc list-inside text-sm space-y-1">
                        <li><strong>The Glass Fortress:</strong> Highly susceptible to Spell/Trap removal.</li>
                        <li><strong>Normal Summon Reliance:</strong> Vulnerable to interruption on Magician's Rod.</li>
                        <li><strong>Prone to Bricking:</strong> Can draw powerful payoffs without starters.</li>
                    </ul>
                </div>
            </div>
            <!-- Banlist -->
            <div class="card p-6">
                <h3 class="text-xl font-bold text-white mb-4"><i class="fas fa-balance-scale text-accent-purple mr-2"></i>Official Edicts (TCG Banlist)</h3>
                <div id="banlist-status" class="space-y-3">
                    <div class="text-center text-gray-400">Consulting the ancient scrolls...</div>
                </div>
            </div>
        </div>
    </section>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const imageFetchQueue = new Map();
        let isFetching = false;

        const processQueue = async () => {
            if (isFetching || imageFetchQueue.size === 0) return;
            isFetching = true;

            const [cardName, containerId] = imageFetchQueue.entries().next().value;
            imageFetchQueue.delete(cardName);

            const container = document.getElementById(containerId);
            if (container) {
                try {
                    const response = await fetch(`https://db.ygoprodeck.com/api/v7/cardinfo.php?name=${encodeURIComponent(cardName)}`);
                    if (!response.ok) throw new Error('Network response was not ok');
                    const data = await response.json();
                    const imageUrl = data?.data?.[0]?.card_images?.[0]?.image_url_small;
                    if (imageUrl) {
                        const img = document.createElement('img');
                        img.src = imageUrl;
                        img.alt = cardName;
                        img.className = 'w-full h-auto rounded-lg shadow-md';
                        container.innerHTML = '';
                        container.appendChild(img);
                    } else {
                        throw new Error('Image URL not found');
                    }
                } catch (error) {
                    console.error(`Failed to fetch image for "${cardName}":`, error);
                    container.textContent = cardName.split(' ').map(w => w[0]).join(''); // Fallback to initials
                }
            }
            isFetching = false;
            setTimeout(processQueue, 100);
        };

        const queueFetchCardImage = (cardName, containerId) => {
            if (!imageFetchQueue.has(cardName)) {
                imageFetchQueue.set(cardName, containerId);
                processQueue();
            }
        };
        
        const fetchAndDisplayBanlist = async () => {
            const banlistContainer = document.getElementById('banlist-status');
            const relevantCards = ['Red-Eyes Dark Dragoon', 'Branded Fusion', 'Bystial Magnamhut', 'Bystial Druiswurm'];
            try {
                const response = await fetch('https://db.ygoprodeck.com/api/v7/cardinfo.php?banlist=tcg');
                if (!response.ok) throw new Error('Network response was not ok');
                const data = await response.json();
                
                const banlist = { 'Banned': [], 'Limited': [], 'Semi-Limited': [] };
                data.data.forEach(card => {
                    const status = card.banlist_info?.ban_tcg;
                    if (relevantCards.includes(card.name) && status && banlist[status] !== undefined) {
                        banlist[status].push(card.name);
                    }
                });

                let htmlContent = '';
                if (banlist['Limited'].length > 0) {
                    htmlContent += `<div class="p-3 rounded bg-orange-900/30 border border-orange-500/50"><h4 class="font-bold text-orange-400">Limited (1)</h4><ul class="text-sm list-disc list-inside">${banlist['Limited'].map(c => `<li>${c}</li>`).join('')}</ul></div>`;
                }
                if (banlist['Semi-Limited'].length > 0) {
                    htmlContent += `<div class="p-3 rounded bg-yellow-900/30 border border-yellow-500/50"><h4 class="font-bold text-yellow-400">Semi-Limited (2)</h4><ul class="text-sm list-disc list-inside">${banlist['Semi-Limited'].map(c => `<li>${c}</li>`).join('')}</ul></div>`;
                }
                
                if (htmlContent === '') {
                    htmlContent = `<div class="p-3 rounded bg-green-900/30 border border-green-500/50"><h4 class="font-bold text-green-400">All Clear</h4><p class="text-sm">Core and related engine cards are currently unrestricted.</p></div>`;
                }
                
                banlistContainer.innerHTML = htmlContent;

            } catch (error) {
                console.error("Failed to fetch banlist:", error);
                banlistContainer.innerHTML = '<p class="text-red-400">Could not retrieve banlist data.</p>';
            }
        };

        const cardsToLoad = {
            'dm-img': "Dark Magician",
            'souls-img': "Magicians' Souls",
            'circle-img': "Dark Magical Circle",
            'soul-img': "Eternal Soul",
            'dragoon-img': "Red-Eyes Dark Dragoon",
            'dmdk-img': "Dark Magician the Dragon Knight",
            'tdm-img': "The Dark Magicians"
        };
        for (const [id, name] of Object.entries(cardsToLoad)) {
            queueFetchCardImage(name, id);
        }
        fetchAndDisplayBanlist();
    });
</script>
</body>
</html>


