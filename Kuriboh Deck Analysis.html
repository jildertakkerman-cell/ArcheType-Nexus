<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuriboh Archetype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="assets/js/card-loader.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #2a1a1a; /* Dark, warm brown */
            color: #f5eadd; /* Creamy off-white */
        }
        .container {
            max-width: 1024px;
        }
        .card {
            background-color: #4d362a; /* Lighter, warm brown */
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
            border: 1px solid #7a5f4d; /* Tan border */
        }
        .combo-step-card {
            background-color: #63483e;
            border: 1px solid #8c735d;
        }
        .pro-con-card {
            background-color: #63483e;
            border: 1px solid #8c735d;
        }
        .card-image-container {
            width: 100%;
            max-width: 180px;
            flex-shrink: 0;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out;
        }
        .card-placeholder {
            background-color: #63483e;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.75rem;
            line-height: 1rem;
            font-weight: bold;
            height: 100%;
            min-height: 250px; 
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: 0 0 10px #63483e;
            cursor: pointer;
        }
        .pro-icon { color: #6ee7b7; }
        .con-icon { color: #fca5a5; }
        .neutral-icon { color: #93c5fd; }
        .text-accent { color: #fde047; } /* Kuriboh yellow */
        .arrow-color { color: #fde047; }
        .heading-underline {
            border-bottom: 2px solid #fde047;
            display: inline-block;
            padding-bottom: 0.25rem;
        }
        .lore-link {
            color: #fde047;
            font-weight: bold;
            text-decoration: none;
            border-bottom: 1px dotted #fde047;
            transition: color 0.3s;
        }
        .lore-link:hover {
            color: #fff;
        }

        /* --- New Kuriboh Animated Banner Styles --- */
        .banner-header {
            position: relative;
            height: 160px;
            background: linear-gradient(45deg, #4d362a, #2a1a1a);
            border-radius: 1rem;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            border: 2px solid #7a5f4d;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.7);
        }

        .banner-content {
            z-index: 2;
            opacity: 0;
            transform: scale(0.9);
            animation: content-appear 1s ease-out 0.5s forwards;
            position: relative;
        }
        .banner-title {
            font-family: 'Comic Neue', cursive;
            font-size: 3rem;
            color: #f5eadd;
            text-shadow: 0 0 8px rgba(253, 224, 71, 0.6), 0 0 15px rgba(253, 224, 71, 0.4);
            letter-spacing: 0.1em;
        }
        .banner-subtitle {
            font-size: 1.125rem;
            color: #f5eadd;
        }

        .furball {
            position: absolute;
            background: radial-gradient(circle, rgba(253,224,71,0.2) 0%, rgba(253,224,71,0) 70%);
            border-radius: 50%;
            opacity: 0;
            animation: float 10s infinite linear;
            box-shadow: 0 0 15px rgba(253, 224, 71, 0.3);
        }
        .furball.f1 { width: 60px; height: 60px; left: 10%; animation-duration: 12s; animation-delay: 0s; }
        .furball.f2 { width: 40px; height: 40px; left: 25%; animation-duration: 8s; animation-delay: 2s; }
        .furball.f3 { width: 80px; height: 80px; left: 40%; animation-duration: 15s; animation-delay: 1s; }
        .furball.f4 { width: 50px; height: 50px; left: 60%; animation-duration: 10s; animation-delay: 4s; }
        .furball.f5 { width: 70px; height: 70px; left: 80%; animation-duration: 13s; animation-delay: 3s; }
        .furball.f6 { width: 30px; height: 30px; left: 90%; animation-duration: 7s; animation-delay: 5s; }

        @keyframes content-appear {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes float {
            0% { bottom: -100px; opacity: 0; transform: scale(0.8); }
            10% { opacity: 0.7; }
            90% { opacity: 0.7; }
            100% { bottom: 160px; opacity: 0; transform: scale(1.2); }
        }
        /* --- END OF BANNER STYLES --- */

        /* Card Popup Styles */
        #card-popup {
            position: fixed;
            display: none;
            opacity: 0;
            padding: 1rem;
            background-color: rgba(42, 26, 26, 0.95);
            border: 1px solid #7a5f4d;
            border-radius: 0.75rem;
            color: #f5eadd;
            max-width: 300px;
            z-index: 1000;
            pointer-events: none;
            transition: opacity 0.2s ease-in-out;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            font-size: 0.875rem;
        }
        #card-popup h3 {
            font-family: 'Comic Neue', cursive;
            color: #d4a574; /* Light brown accent */
            font-weight: bold;
            font-size: 1.125rem;
        }
        #card-popup p {
            margin-top: 0.5rem;
        }
        #card-popup-stats {
            font-family: 'Comic Neue', cursive;
            color: #8c735d;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="container mx-auto">
        <!-- MODIFIED Title Section -->
        <header class="banner-header">
            <div class="furball f1"></div>
            <div class="furball f2"></div>
            <div class="furball f3"></div>
            <div class="furball f4"></div>
            <div class="furball f5"></div>
            <div class="furball f6"></div>
            <div class="banner-content">
                <h1 class="banner-title">Kuriboh</h1>
                <p class="banner-subtitle">A Strategic Deep Dive into the Fluffy Swarm</p>
            </div>
        </header>

        <!-- Executive Summary Section -->
        <section class="mb-10 md:mb-16">
            <div class="card p-6">
                <h2 class="text-xl md:text-2xl font-bold text-white mb-4">Executive Summary</h2>
                <p class="text-yellow-100">
                    The <strong class="text-accent font-bold">Kuriboh</strong> archetype is a fascinating case study in evolution, originating from a single, iconic monster into a sprawling family. Unlike traditional archetypes, Kuriboh functions as a versatile, Level 1 swarm engine. Its modern strategy isn't to win with its own members, but to flood the field with materials for powerful, generic Extra Deck monsters. While rooted in nostalgia, its contemporary use is a casual-to-rogue combo deck capable of producing formidable boards, though it can be hampered by inconsistency.
                </p>
            </div>
        </section>

        <!-- The Kuriboh Roster Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">The Kuriboh Roster: Key Players</h2>
            <p class="text-yellow-100 mb-8 text-center max-w-2xl mx-auto">
                Understanding the Kuriboh strategy requires knowing the roles of its many members, from the core swarm engine to defensive utilities. There's a fascinating tension in their design; many powerful effects are locked to the Battle Phase, a phase modern combo decks often try to control or bypass.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Core Swarm Engine -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-users text-4xl text-yellow-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">The Core Swarm Engine</h3>
                    </div>
                    <div class="space-y-4">
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">The Kuriboh Brothers</h4>
                            <p class="text-sm text-yellow-100">Kuribah, Kuribee, Kuriboo, and Kuribeh, alongside the original, form a five-part engine that is the heart of the deck's ability to generate a critical mass of monsters.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Kuribabylon</h4>
                            <p class="text-sm text-yellow-100">The nominal boss of the Brothers engine. It can be Special Summoned from the hand and has a powerful effect to return itself to the hand to Special Summon all five original Brothers from the hand and/or Graveyard.</p>
                        </div>
                    </div>
                </div>
                <!-- Primary Enablers -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-magic text-4xl text-yellow-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">Primary Enablers: Spells</h3>
                    </div>
                    <div class="space-y-4">
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Five Star Twilight</h4>
                            <p class="text-sm text-yellow-100">Arguably the most important combo starter. It lets you Tribute a Level 5 monster to Special Summon all five Kuriboh Brothers from your hand, Deck, and/or Graveyard.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Multiply</h4>
                            <p class="text-sm text-yellow-100">A classic Spell that Tributes one Kuriboh to Special Summon five "Kuriboh Tokens," providing five materials for Link Summoning.</p>
                        </div>
                         <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">The Flute of Summoning Kuriboh</h4>
                             <p class="text-sm text-yellow-100">A versatile Quick-Play Spell that can add or Special Summon a Kuriboh, making it a flexible combo piece or defensive tool. It's a key part of the <a href="https://www.yugioh.com/cards/kuriboh" target="_blank" class="lore-link">whole fluffy strategy</a>.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Core Combo Walkthrough Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Core Combo: The Five Star Twilight Power Play</h2>
            <p class="text-yellow-100 mb-8 text-center max-w-2xl mx-auto">This walkthrough demonstrates the deck's most direct and potent line of play, aiming to summon all five Kuriboh Brothers at once.</p>
            <div class="flex flex-col items-center gap-6">
                <!-- Step 1 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                    <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="instant-fusion-img-container" class="card-image-container flex-shrink-0 card-placeholder">Level 5 Enabler (e.g., Instant Fusion)</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#4d362a] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">1</span>
                                <h3 class="text-lg font-bold">Summon a Level 5 Monster</h3>
                            </div>
                            <p class="text-yellow-100">Activate a card like <strong class="text-accent font-bold">Instant Fusion</strong> or use <strong class="text-accent font-bold">Astral Kuriboh</strong> to get a Level 5 monster on the field.</p>
                        </div>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 2 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                     <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="five-star-img-container" class="card-image-container flex-shrink-0 card-placeholder">Five Star Twilight</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#4d362a] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">2</span>
                                <h3 class="text-lg font-bold">Activate Five Star Twilight</h3>
                            </div>
                            <p class="text-yellow-100">Tribute the Level 5 monster to activate <strong class="text-accent font-bold">Five Star Twilight</strong>, Special Summoning all five Kuriboh Brothers from your hand, Deck, and/or Graveyard.</p>
                        </div>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 3 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                     <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="apollousa-img-container" class="card-image-container flex-shrink-0 card-placeholder">Apollousa, Bow of the Goddess</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#4d362a] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">3</span>
                                <h3 class="text-lg font-bold">Pivot to the Extra Deck</h3>
                            </div>
                            <p class="text-yellow-100">With five monsters on the field, perform a series of Link Summons. A standard line is to use four monsters to Link Summon <strong class="text-accent font-bold">Apollousa, Bow of the Goddess</strong> with four negations.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Endboard Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">The End Goal: Constructing the Optimal End Board</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mx-auto max-w-4xl">
                <!-- Link-Centric End Board -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">Link-Centric Board: A Wall of Negation</h3>
                    <div class="flex justify-center mb-4">
                        <div id="masquerena-img-container" class="card-image-container card-placeholder">I:P Masquerena</div>
                    </div>
                    <ul class="list-disc list-inside space-y-2 text-yellow-100">
                        <li><strong class="text-accent font-bold">Apollousa, Bow of the Goddess:</strong> A 4-material Apollousa provides four monster effect negations.</li>
                        <li><strong class="text-accent font-bold">I:P Masquerena Setups:</strong> Ending on I:P Masquerena allows for a Quick Link Summon on the opponent's turn into a disruptive monster like <strong class="text-accent font-bold">S:P Little Knight</strong> or <strong class="text-accent font-bold">Knightmare Unicorn</strong>.</li>
                    </ul>
                </div>
                <!-- Xyz-Centric End Board -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">Xyz-Centric Board: Towers and Board Wipes</h3>
                    <div class="flex justify-center mb-4">
                        <div id="zeus-img-container" class="card-image-container card-placeholder">Divine Arsenal AA-ZEUS - Sky Thunder</div>
                    </div>
                    <ul class="list-disc list-inside space-y-2 text-yellow-100">
                        <li><strong class="text-accent font-bold">Divine Arsenal AA-ZEUS - Sky Thunder:</strong> The ultimate tool for breaking an opponent's board when going second.</li>
                        <li><strong class="text-accent font-bold">"Utopic Future Draco Future" Package:</strong> A more resource-intensive but powerful end board that provides an omni-negate and the ability to steal an opponent's monster.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Pros, Cons, and Synergies Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Strategic Viability Analysis</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Strengths Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-green-400 mb-4">Strengths</h3>
                    <ul class="list-disc list-inside space-y-2 text-yellow-100">
                        <li><span class="pro-icon"><i class="fas fa-check-circle"></i></span> <strong class="text-green-400 font-bold">High Ceiling:</strong> Can produce end boards on par with more competitive strategies.</li>
                        <li><span class="pro-icon"><i class="fas fa-rocket"></i></span> <strong class="text-green-400 font-bold">Explosive Swarm:</strong> Exceptional at flooding the field with Level 1 monsters.</li>
                        <li><span class="pro-icon"><i class="fas fa-toolbox"></i></span> <strong class="text-green-400 font-bold">Versatile Toolbox:</strong> Access to the full range of powerful generic Link and Rank 1 Xyz monsters.</li>
                    </ul>
                </div>
                <!-- Weaknesses Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-red-400 mb-4">Weaknesses</h3>
                    <ul class="list-disc list-inside space-y-2 text-yellow-100">
                        <li><span class="con-icon"><i class="fas-solid fa-staff-snake"></i></span> <strong class="text-red-400 font-bold">"Glass Cannon":</strong> Primary combo lines are linear, fragile, and highly vulnerable to disruption.</li>
                        <li><span class="con-icon"><i class="fas fa-hand"></i></span> <strong class="text-red-400 font-bold">Inconsistent:</strong> Lacks fast internal searchers, relying on drawing specific, unsearchable combo-starting Spells.</li>
                        <li><span class="con-icon"><i class="fas fa-skull-crossbones"></i></span> <strong class="text-red-400 font-bold">No Fallback:</strong> A failed combo often results in an immediate loss with no in-archetype boss monster to fall back on.</li>
                    </ul>
                </div>
                <!-- Synergies -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4">Synergies & Hybrids</h3>
                    <ul class="list-disc list-inside space-y-2 text-yellow-100">
                        <li><span class="neutral-icon"><i class="fas fa-dove"></i></span> <strong class="text-accent font-bold">Lyrilusc:</strong> Another Level 1 swarm strategy, enabling even more consistent Xyz plays for ZEUS or Utopic Draco Future.</li>
                        <li><span class="neutral-icon"><i class="fas fa-hashtag"></i></span> <strong class="text-accent font-bold">Numeron:</strong> An aggressive, go-second OTK strategy that synergizes directly with Astral Kuriboh for protection.</li>
                         <li><span class="neutral-icon"><i class="fas fa-fire"></i></span> <strong class="text-accent font-bold">Fiendsmith:</strong> A promising future direction, combining the Kuriboh swarm with a more resilient and interactive engine.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- TCG Banlist Status Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Current TCG Banlist Status</h2>
            <div class="card p-6">
                <p class="text-yellow-100 mb-4 text-center">
                    <strong class="text-accent font-bold">Important Notice:</strong> All Kuriboh archetype cards are currently unrestricted in the TCG format. However, some generic support cards commonly used in Kuriboh strategies have limitations:
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="card combo-step-card p-4">
                        <h4 class="text-lg font-bold text-green-400 mb-2">Unrestricted Archetype Cards</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-yellow-100">
                            <li>All Kuriboh monsters (3 copies each)</li>
                            <li>Five Star Twilight (3 copies)</li>
                            <li>Multiply (3 copies)</li>
                            <li>The Flute of Summoning Kuriboh (3 copies)</li>
                        </ul>
                    </div>
                    <div class="card combo-step-card p-4">
                        <h4 class="text-lg font-bold text-yellow-400 mb-2">Generic Support Restrictions</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-yellow-100">
                            <li><strong>Linkuriboh:</strong> <span class="text-yellow-400">Limited (1 copy)</span></li>
                            <li>Other generic Link/Xyz monsters: Check current banlist</li>
                            <li>Hand traps and staples: Follow current restrictions</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-4 p-3 bg-yellow-900 bg-opacity-30 rounded border-l-4 border-yellow-400">
                    <p class="text-sm text-yellow-100"><strong>Reminder:</strong> Always verify the current TCG banlist before tournament play, as restrictions may change with each format update.</p>
                </div>
            </div>
        </section>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- CARD POPUP AND IMAGE FETCHER SCRIPT ---

            const cardDataCache = {};
            const popup = document.getElementById('card-popup');
            let activePopup = null;

            async function fetchAndProcessCardData(cardName, containerId) {
                const container = document.getElementById(containerId);
                if (!container) return;
                
                container.addEventListener('click', (event) => {
                    event.stopPropagation();
                    showPopup(event, cardName);
                });

                const apiUrl = `https://db.ygoprodeck.com/api/v7/cardinfo.php?name=${encodeURIComponent(cardName)}`;

                try {
                    if (cardDataCache[cardName]) {
                        displayCardImage(cardDataCache[cardName], container);
                        return;
                    }
                    
                    const response = await fetch(apiUrl);
                    if (!response.ok) throw new Error(`API error: ${response.status}`);
                    const data = await response.json();
                    const cardInfo = data?.data?.[0];
                    
                    if (cardInfo) {
                        cardDataCache[cardName] = cardInfo;
                        displayCardImage(cardInfo, container);
                    } else {
                        throw new Error("Card data not found in API response.");
                    }
                } catch (error) {
                    console.error(`Failed to fetch data for "${cardName}":`, error);
                    container.innerHTML = `<div class="card-placeholder animate-fadeIn">${cardName}</div>`;
                }
            }

            function displayCardImage(cardInfo, container) {
                 const imageUrl = cardInfo.card_images?.[0]?.image_url;
                 if (imageUrl) {
                    const img = document.createElement('img');
                    img.src = imageUrl;
                    img.alt = cardInfo.name;
                    img.className = 'w-full h-auto rounded-lg shadow-md animate-fadeIn';
                    container.innerHTML = '';
                    container.appendChild(img);
                } else {
                     container.innerHTML = `<div class="card-placeholder animate-fadeIn">${cardInfo.name}</div>`;
                }
            }
            
            function showPopup(event, cardName) {
                if (!popup) return;
                const cardInfo = cardDataCache[cardName];
                if (!cardInfo) return;

                let stats = '';
                let atkDef = [];
                if (cardInfo.atk !== undefined) atkDef.push(`ATK/${cardInfo.atk}`);
                if (cardInfo.def !== undefined) atkDef.push(`DEF/${cardInfo.def}`);
                if (cardInfo.linkval) atkDef.push(`LINK-${cardInfo.linkval}`);
                if(atkDef.length > 0) {
                    stats = `<p id="card-popup-stats" class="mt-2">${atkDef.join(' ')}</p>`;
                }
                
                const cardType = cardInfo.type.includes('Monster') ? `[${cardInfo.race} / ${cardInfo.type.replace(' Monster', '')}]` : `[${cardInfo.race} Card]`;

                popup.innerHTML = `
                    <div>
                        <h3>${cardInfo.name}</h3>
                        <p class="text-xs text-yellow-300">${cardType}</p>
                        <div class="w-full h-px bg-yellow-700 my-2"></div>
                        <p class="text-xs">${cardInfo.desc.replace(/\r\n/g, '<br>')}</p>
                        ${stats}
                    </div>
                `;
                
                movePopup(event);
                popup.style.display = 'block';
                setTimeout(() => { popup.style.opacity = 1; }, 10);
                activePopup = popup;
            }

            function hidePopup() {
                if (activePopup) {
                    activePopup.style.opacity = 0;
                    setTimeout(() => { 
                        if (activePopup) activePopup.style.display = 'none'; 
                    }, 200);
                    activePopup = null;
                }
            }

            function movePopup(event) {
                if (!popup) return;
                const popupWidth = popup.offsetWidth;
                const popupHeight = popup.offsetHeight;
                const cushion = 20;

                let x = event.clientX + cushion;
                let y = event.clientY + cushion;

                if (x + popupWidth > window.innerWidth) {
                    x = event.clientX - popupWidth - cushion;
                }
                if (y + popupHeight > window.innerHeight) {
                    y = event.clientY - popupHeight - cushion;
                }

                popup.style.left = `${x}px`;
                popup.style.top = `${y}px`;
            }

            // Global click listener to close the popup
            document.addEventListener('click', hidePopup);

            const cardsToLoad = {
                'instant-fusion-img-container': 'Instant Fusion',
                'five-star-img-container': 'Five Star Twilight',
                'apollousa-img-container': 'Apollousa, Bow of the Goddess',
                'masquerena-img-container': 'I:P Masquerena',
                'zeus-img-container': 'Divine Arsenal AA-ZEUS - Sky Thunder'
            };

            for (const [containerId, cardName] of Object.entries(cardsToLoad)) {
                fetchAndProcessCardData(cardName, containerId);
            }
        });
    </script>

    <!-- Card Popup -->
    <div id="card-popup"></div>
    
</body>
</html>

