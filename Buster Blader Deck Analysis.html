<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buster Blader Archetype Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a; /* Dark Charcoal */
            color: #e0e7ff; /* Light Lavender White */
        }
        .container {
            max-width: 1024px;
        }
        .card {
            background-color: #2d2d2d; /* Slightly lighter charcoal */
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid #a855f7; /* Purple border */
            backdrop-filter: blur(10px);
        }
        .combo-step-card, .pro-con-card {
            background-color: rgba(45, 45, 45, 0.8);
            border: 1px solid #8b5cf6;
        }
        .card-image-container {
            width: 100%;
            max-width: 180px;
            flex-shrink: 0;
        }
        .card-image {
            width: 100%;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        .card-placeholder {
            background-color: #4d4d4d;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.75rem;
            line-height: 1rem;
            font-weight: bold;
            height: 100%;
            min-height: 250px;
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: 0 0 10px #4d4d4d;
            border: 1px dashed #8b5cf6;
            cursor: pointer;
        }
        .pro-icon { color: #34d399; }
        .con-icon { color: #ef4444; }
        .neutral-icon { color: #60a5fa; }
        .text-accent { color: #a855f7; } /* Purple for accents */
        .arrow-color { color: #a855f7; }
        .heading-underline {
            border-bottom: 2px solid #a855f7;
            display: inline-block;
            padding-bottom: 0.25rem;
        }
        .lore-link {
            color: #c084fc;
            font-weight: bold;
            text-decoration: none;
            border-bottom: 1px dotted #c084fc;
            transition: color 0.3s, text-shadow 0.3s;
        }
        .lore-link:hover {
            color: #fff;
            text-shadow: 0 0 5px #a855f7;
        }

        .banner-header {
            position: relative;
            min-height: 160px;
            background: linear-gradient(45deg, #1a1a1a, #2d2d2d);
            border-radius: 1rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            margin-bottom: 2.5rem;
            border: 1px solid #a855f7;
        }

        .banner-header h1, .banner-header p {
            position: relative;
            z-index: 3;
            text-shadow: 0 0 15px rgba(168, 85, 247, 0.7);
        }
        
        .banner-header h1 {
             font-family: 'Cinzel', serif;
        }

        .ygo-home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #1e1b4b 100%);
            color: white;
            border: 2px solid #6366f1;
            border-radius: 12px;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 4px 15px rgba(99, 102, 241, 0.4),
                0 0 20px rgba(99, 102, 241, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            overflow: hidden;
        }
        
        .ygo-home-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 30%, rgba(99, 102, 241, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(139, 92, 246, 0.2) 0%, transparent 50%);
            animation: ygoButtonPulse 3s ease-in-out infinite;
            pointer-events: none;
        }
        
        .ygo-home-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 
                0 8px 25px rgba(99, 102, 241, 0.6),
                0 0 30px rgba(99, 102, 241, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border-color: #8b5cf6;
        }
        
        .ygo-home-button:active {
            transform: translateY(-1px) scale(1.02);
        }
        
        .ygo-home-button i {
            font-size: 22px;
            position: relative;
            z-index: 2;
            text-shadow: 0 0 10px rgba(99, 102, 241, 0.8);
            animation: ygoIconGlow 2s ease-in-out infinite alternate;
        }
        
        .ygo-home-button .ygo-home-text {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            font-weight: 600;
            color: #a5b4fc;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
            opacity: 0;
            transition: opacity 0.3s ease;
            white-space: nowrap;
            pointer-events: none;
        }
        
        .ygo-home-button:hover .ygo-home-text {
            opacity: 1;
        }
        
        @keyframes ygoButtonPulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        @keyframes ygoIconGlow {
            0% { 
                text-shadow: 
                    0 0 10px rgba(99, 102, 241, 0.8),
                    0 0 20px rgba(139, 92, 246, 0.4);
            }
            100% { 
                text-shadow: 
                    0 0 15px rgba(99, 102, 241, 1),
                    0 0 30px rgba(139, 92, 246, 0.6),
                    0 0 40px rgba(59, 130, 246, 0.3);
            }
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .ygo-home-button {
                width: 50px;
                height: 50px;
                top: 15px;
                left: 15px;
            }
            
            .ygo-home-button i {
                font-size: 18px;
            }
        }
        #card-popup {
            background-color: #2d2d2d;
            border-color: #a855f7;
            color: #e0e7ff;
            font-family: 'Inter', sans-serif;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
        }
        #card-popup h3 {
            color: #c084fc;
            font-family: 'Cinzel', serif;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        #card-popup p {
            margin-bottom: 0.5rem;
        }
        #card-popup-stats {
            color: #c084fc;
            font-weight: bold;
        }
    </style>
</head>
<body class="p-4 md:p-8">
     <a href="index.html" class="ygo-home-button" title="Return to Archetype Nexus">
        <i class="fas fa-home"></i>
        <span class="ygo-home-text">NEXUS</span>
    </a>

    <!-- Card Popup -->
    <div id="card-popup" class="fixed z-50 bg-purple-900 border-2 border-purple-500 text-white p-4 rounded-lg shadow-lg max-w-xs max-h-96 overflow-y-auto opacity-0 transition-opacity duration-200 pointer-events-none"></div>
    <div class="container mx-auto">
        <!-- Title Section -->
        <header class="banner-header text-center">
            <h1 class="text-3xl md:text-5xl font-extrabold text-white mb-2">BUSTER BLADER</h1>
            <p class="text-lg md:text-xl text-purple-200">The Dragon Destroyer's Legacy</p>
        </header>

        <!-- Executive Summary Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn">
            <div class="card p-6">
                <h2 class="text-xl md:text-2xl font-bold text-white mb-4">Executive Summary</h2>
                <p class="text-indigo-200">
                    The <strong class="text-accent font-bold">Buster Blader</strong> archetype is a formidable anti-dragon strategy that has evolved into a potent floodgate deck. By combining its own members with the <strong class="text-accent font-bold">Destruction Sword</strong> sub-archetype, this deck aims to establish the "Buster Lock." This powerful combination transforms all opponent's monsters into Dragon-type, then proceeds to negate their effects and force them into defense position. It's a control-heavy strategy that seeks to dismantle the opponent's board and leave them defenseless against the might of the Dragon Destroyer Swordsman.
                </p>
            </div>
        </section>

        <!-- The Buster Blader Arsenal Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.2s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-8 text-center heading-underline">The Buster Blader Arsenal</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Monsters -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-user-shield text-4xl text-purple-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">Main Deck Warriors</h3>
                    </div>
                    <div class="space-y-4">
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Buster Blader</h4>
                            <p class="text-sm text-indigo-200">The original dragon slayer. While he's the face of the archetype, his retrained version often takes the spotlight in modern builds.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Buster Blader, the Destruction Swordmaster</h4>
                            <p class="text-sm text-indigo-200">This retrained version is key for consistency, as its name becomes "Buster Blader" on the field and in the GY.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Buster Whelp of the Destruction Swordsman</h4>
                            <p class="text-sm text-indigo-200">The heart of the deck's consistency, searching for any "Destruction Sword" card upon being Normal Summoned.</p>
                        </div>
                    </div>
                </div>
                <!-- Spells & Extra Deck -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-dragon-slayer text-4xl text-purple-300 mr-4"></i>
                        <h3 class="text-xl font-bold text-white">Extra Deck & Support</h4>
                    </div>
                    <div class="space-y-4">
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Buster Dragon</h4>
                            <p class="text-sm text-indigo-200">The Synchro monster that sets the stage for the Buster Lock by turning all opposing monsters into Dragons.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Buster Blader, the Dragon Destroyer Swordsman</h4>
                            <p class="text-sm text-indigo-200">The Fusion boss monster that enforces the lock, negating effects and forcing monsters into defense.</p>
                        </div>
                        <div class="card combo-step-card p-4">
                            <h4 class="text-lg font-bold text-accent mb-1">Prologue of the Destruction Swordsman</h4>
                            <p class="text-sm text-indigo-200">A crucial trap that sends materials from the deck to the GY to cheat out Buster Dragon.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Core Combo Walkthrough Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.4s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">The Buster Lock Blueprint</h2>
            <p class="text-indigo-200 mb-8 text-center max-w-2xl mx-auto">
                The deck's power is concentrated in its ability to quickly establish the "Buster Lock". This sequence showcases how a few key <a href="https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&keyword=Buster%20Blader&stype=1" target="_blank" class="lore-link">Buster Blader cards</a> can create an oppressive board state.
            </p>
            <div class="flex flex-col items-center gap-6">
                <!-- Step 1 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                    <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="whelp-img-container" class="card-image-container flex-shrink-0 card-placeholder">Buster Whelp</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#2d2d2d] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">1</span>
                                <h3 class="text-lg font-bold">The Search</h3>
                            </div>
                            <p class="text-indigo-200">Normal Summon <strong class="text-accent">Buster Whelp of the Destruction Swordsman</strong>. Use its effect to search for <strong class="text-accent">Prologue of the Destruction Swordsman</strong>.</p>
                        </div>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 2 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                     <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="prologue-img-container" class="card-image-container flex-shrink-0 card-placeholder">Prologue Trap</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#2d2d2d] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">2</span>
                                <h3 class="text-lg font-bold">Set the Stage</h3>
                            </div>
                            <p class="text-indigo-200">Set <strong class="text-accent">Prologue of the Destruction Swordsman</strong> and pass the turn.</p>
                        </div>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 3 -->
                <div class="card p-6 combo-step-card w-full max-w-lg">
                     <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                        <div id="dragon-destroyer-img-container" class="card-image-container flex-shrink-0 card-placeholder">Dragon Destroyer</div>
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-[#2d2d2d] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">3</span>
                                <h3 class="text-lg font-bold">Execute the Lock</h3>
                            </div>
                            <p class="text-indigo-200">On your opponent's turn, activate <strong class="text-accent">Prologue</strong> to send materials from your deck and summon <strong class="text-accent">Buster Dragon</strong>. Then, use a card like <strong class="text-accent">Destruction Sword Memories</strong> from the GY to Fusion Summon <strong class="text-accent">Buster Blader, the Dragon Destroyer Swordsman</strong>.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Endboard Section -->
        <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 0.6s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">The Ultimate End Board</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mx-auto max-w-4xl">
                <!-- Buster Dragon -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">Buster Dragon</h3>
                    <div class="flex justify-center mb-4">
                        <div id="buster-dragon-img-container" class="card-image-container card-placeholder">Buster Dragon</div>
                    </div>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><strong class="text-accent">Type Transformation:</strong> Changes all opponent's monsters on the field to Dragon-type.</li>
                        <li><strong class="text-accent">Recursion:</strong> Equips a "Destruction Sword" monster from the GY during the End Phase.</li>
                    </ul>
                </div>
                <!-- Dragon Destroyer Swordsman -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4 text-center">Dragon Destroyer Swordsman</h3>
                    <div class="flex justify-center mb-4">
                        <div id="dragon-destroyer-end-img-container" class="card-image-container card-placeholder">Dragon Destroyer</div>
                    </div>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><strong class="text-accent">Effect Negation:</strong> Prevents all of your opponent's Dragon-type monsters from activating their effects.</li>
                        <li><strong class="text-accent">Board Control:</strong> Forces all of your opponent's Dragon-type monsters into Defense Position.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- TCG Banlist Status Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Current TCG Banlist Status</h2>
            <div class="card p-6">
                <p class="text-gray-300 mb-4 text-center">
                    <strong class="text-green-500 font-bold">FULL POWER:</strong> The Buster Blader archetype is currently untouched by the TCG Forbidden & Limited List.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="card combo-step-card p-4">
                        <h4 class="text-lg font-bold text-green-400 mb-2">Unrestricted Cards</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-gray-300">
                            <li>All "Buster Blader" monsters (3 copies each)</li>
                            <li>All "Destruction Sword" cards (3 copies each)</li>
                            <li>Prologue of the Destruction Swordsman (3 copies)</li>
                        </ul>
                    </div>
                    <div class="card combo-step-card p-4">
                         <h4 class="text-lg font-bold text-green-400 mb-2">Implications</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-gray-300">
                           <li>Maximum consistency for the core engine.</li>
                           <li>No in-archetype restrictions on building and executing the "Buster Lock".</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-4 p-3 bg-green-900 bg-opacity-30 rounded border-l-4 border-green-500">
                    <p class="text-sm text-gray-300"><strong>Meta Outlook:</strong> While the core archetype is at full power, its reliance on a specific two-monster end board can be fragile. Success in a competitive environment often depends on the surrounding generic support cards and the player's ability to protect the combo. The deck thrives against strategies heavily reliant on monster effects and the Extra Deck.</p>
                </div>
            </div>
        </section>


        <!-- Competitive Analysis Section -->
        <section class="animate-fadeIn" style="animation-delay: 0.8s;">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">Competitive Analysis</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Strengths Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-green-400 mb-4">Strengths</h3>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><span class="pro-icon"><i class="fas fa-lock"></i></span> <strong class="text-green-300">Powerful Floodgate:</strong> The "Buster Lock" can completely shut down many modern meta decks.</li>
                        <li><span class="pro-icon"><i class="fas fa-search"></i></span> <strong class="text-green-300">One-Card Combos:</strong> Cards like Buster Whelp can initiate the entire strategy.</li>
                        <li><span class="pro-icon"><i class="fas fa-dragon"></i></span> <strong class="text-green-300">Anti-Meta Potential:</strong> Excels against Dragon-heavy formats or any strategy reliant on monster effects.</li>
                    </ul>
                </div>
                <!-- Weaknesses Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-red-400 mb-4">Weaknesses</h3>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><span class="con-icon"><i class="fas fa-bolt"></i></span> <strong class="text-red-300">Fragile Choke Points:</strong> A single well-timed hand trap on Buster Whelp or Prologue can end the turn.</li>
                        <li><span class="con-icon"><i class="fas fa-book-dead"></i></span> <strong class="text-red-300">Vulnerable to Spell/Trap Removal:</strong> The lock is dependent on monsters that can be removed by cards like Raigeki or Evenly Matched.</li>
                         <li><span class="con-icon"><i class="fas fa-random"></i></span> <strong class="text-red-300">Consistency Issues:</strong> Can struggle with "bricky" hands if key combo pieces aren't drawn.</li>
                    </ul>
                </div>
                <!-- Tech Cards -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-white mb-4">Key Tech Choices</h3>
                    <ul class="list-disc list-inside space-y-2 text-indigo-200">
                        <li><span class="neutral-icon"><i class="fas fa-atom"></i></span> <strong class="text-accent">Bystial Monsters:</strong> Provide disruption and can serve as easy Dragon-type fusion material.</li>
                        <li><span class="neutral-icon"><i class="fas fa-link"></i></span> <strong class="text-accent">Link Engines:</strong> Generic link monsters help to build more resilient boards with added negations.</li>
                        <li><span class="neutral-icon"><i class="fas fa-hand-paper"></i></span> <strong class="text-accent">Hand Traps:</strong> Cards like Ash Blossom & Joyous Spring are crucial for protecting your own combo and disrupting the opponent.</li>
                    </ul>
                </div>
            </div>
        </section>

    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
           
            const cardDataCache = {};
            const popup = document.getElementById('card-popup');
            let activePopup = null;
            let lastShown = 0;
            let currentCard = null;

            async function fetchAndProcessCardData(cardName, containerId) {
                const container = document.getElementById(containerId);
                if (!container) return;
                
                container.addEventListener('click', (event) => {
                    event.stopPropagation();
                    showPopup(event, cardName);
                });

                const apiUrl = `https://db.ygoprodeck.com/api/v7/cardinfo.php?name=${encodeURIComponent(cardName)}`;

                try {
                    if (cardDataCache[cardName]) {
                        displayCardImage(cardDataCache[cardName], container);
                        return;
                    }
                    
                    const response = await fetch(apiUrl);
                    if (!response.ok) throw new Error(`API error: ${response.status}`);
                    const data = await response.json();
                    const cardInfo = data?.data?.[0];
                    
                    if (cardInfo) {
                        cardDataCache[cardName] = cardInfo;
                        displayCardImage(cardInfo, container);
                    } else {
                        throw new Error("Card data not found in API response.");
                    }
                } catch (error) {
                    console.error(`Failed to fetch data for "${cardName}":`, error);
                    container.innerHTML = `<div class="card-placeholder">${cardName}</div>`;
                }
            }

            function displayCardImage(cardInfo, container) {
                 const imageUrl = cardInfo.card_images?.[0]?.image_url;
                 if (imageUrl) {
                    const img = document.createElement('img');
                    img.src = imageUrl;
                    img.alt = cardInfo.name;
                    img.className = 'w-full h-auto rounded-lg shadow-md animate-fadeIn';
                    container.innerHTML = '';
                    container.appendChild(img);
                } else {
                     container.innerHTML = `<div class="card-placeholder">${cardInfo.name}</div>`;
                }
            }
            
            function showPopup(event, cardName) {
                if (currentCard === cardName) {
                    hidePopup();
                    return;
                }
                hidePopup(); // Ensure any existing popup is hidden first
                if (!popup) return;
                const cardInfo = cardDataCache[cardName];
                if (!cardInfo) return;

                let stats = '';
                let atkDef = [];
                if (cardInfo.atk !== undefined) atkDef.push(`ATK/${cardInfo.atk}`);
                if (cardInfo.def !== undefined) atkDef.push(`DEF/${cardInfo.def}`);
                if (cardInfo.linkval) atkDef.push(`LINK-${cardInfo.linkval}`);
                if(atkDef.length > 0) {
                    stats = `<p id="card-popup-stats" class="mt-2">${atkDef.join(' ')}</p>`;
                }
                
                const cardType = cardInfo.type.includes('Monster') ? `[${cardInfo.race} / ${cardInfo.type.replace(' Monster', '')}]` : `[${cardInfo.race} Card]`;

                popup.innerHTML = `
                    <div>
                        <h3>${cardInfo.name}</h3>
                        <p class="text-xs text-purple-300">${cardType}</p>
                        <div class="w-full h-px bg-purple-700 my-2"></div>
                        <p class="text-xs">${cardInfo.desc.replace(/\r\n/g, '<br>')}</p>
                        ${stats}
                    </div>
                `;
                
                movePopup(event);
                popup.style.display = 'block';
                setTimeout(() => { popup.style.opacity = 1; }, 10);
                activePopup = popup;
                lastShown = Date.now();
                currentCard = cardName;
            }

            function hidePopup() {
                if (Date.now() - lastShown < 100) return; // Ignore hide calls immediately after showing
                if (activePopup) {
                    activePopup.style.opacity = 0;
                    setTimeout(() => { 
                        if (activePopup) activePopup.style.display = 'none'; 
                    }, 200);
                    activePopup = null;
                    currentCard = null;
                }
            }

            function movePopup(event) {
                if (!popup) return;
                const popupWidth = popup.offsetWidth;
                const popupHeight = popup.offsetHeight;
                const cushion = 20;

                let x = event.clientX + cushion;
                let y = event.clientY + cushion;

                if (x + popupWidth > window.innerWidth) {
                    x = event.clientX - popupWidth - cushion;
                }
                if (y + popupHeight > window.innerHeight) {
                    y = event.clientY - popupHeight - cushion;
                }

                popup.style.left = `${x}px`;
                popup.style.top = `${y}px`;
            }

            // Global click listener to close the popup
            document.addEventListener('click', hidePopup);

            const cardsToLoad = {
                'whelp-img-container': 'Buster Whelp of the Destruction Swordsman',
                'prologue-img-container': 'Prologue of the Destruction Swordsman',
                'dragon-destroyer-img-container': 'Buster Blader, the Dragon Destroyer Swordsman',
                'buster-dragon-img-container': 'Buster Dragon',
                'dragon-destroyer-end-img-container': 'Buster Blader, the Dragon Destroyer Swordsman',
            };

            for (const [containerId, cardName] of Object.entries(cardsToLoad)) {
                fetchAndProcessCardData(cardName, containerId);
            }
        });
    </script>
</body>
</html>
