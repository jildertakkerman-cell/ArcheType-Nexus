<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermail Archetype Deep Dive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="assets/js/card-loader.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #030c14; /* Deep Ocean Blue */
            color: #e0f2fe; /* Light Cyan */
        }
        .container {
            max-width: 1024px;
        }
        .card {
            background-color: #0b1a2a; /* Dark Slate Blue */
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid #1e3a5f; /* Lighter Blue Border */
        }
        .combo-step-card {
            background-color: #10253f; /* Slightly lighter blue */
            border: 1px solid #2a4c7a;
        }
        .pro-con-card {
            background-color: #10253f;
            border: 1px solid #2a4c7a;
        }
        .card-image-container {
            width: 100%;
            max-width: 180px;
            flex-shrink: 0;
        }
        .card-image {
            width: 100%;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        .card-placeholder {
            background-color: #10253f;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.75rem;
            line-height: 1rem;
            font-weight: bold;
            height: 100%;
            min-height: 250px;
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: inset 0 0 15px rgba(0, 191, 255, 0.2);
            cursor: pointer;
        }
        .pro-icon { color: #34d399; }
        .con-icon { color: #ef4444; }
        .neutral-icon { color: #60a5fa; }
        .text-accent { color: #38bdf8; } /* Sky Blue */
        .arrow-color { color: #0ea5e9; }
        .heading-underline {
            border-bottom: 2px solid #0ea5e9;
            display: inline-block;
            padding-bottom: 0.25rem;
        }
        .lore-link {
            color: #38bdf8;
            font-weight: bold;
            text-decoration: none;
            border-bottom: 1px dotted #38bdf8;
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .lore-link:hover {
            color: #bae6fd;
            border-bottom-color: #bae6fd;
        }

        /* --- Mermail Animated Banner Styles --- */
        .banner {
            position: relative;
            height: 160px;
            background: linear-gradient(45deg, #020c14, #0b1a2a);
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            border-radius: 1rem;
            border: 2px solid #1e3a5f;
            box-shadow: 0 8px 30px rgba(0, 100, 150, 0.4);
        }
        .banner-content {
            z-index: 2;
            opacity: 0;
            transform: scale(0.9);
            animation: content-appear 1s ease-out 0.5s forwards;
            position: relative;
        }
        .banner-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            color: #e0f2fe;
            text-shadow: 0 0 8px rgba(56, 189, 248, 0.6), 0 0 15px rgba(14, 165, 233, 0.4);
        }
        .banner-subtitle {
            font-size: 1.1rem;
            color: #a5f3fc;
        }
        .bubble {
            position: absolute;
            background: rgba(14, 165, 233, 0.15);
            border: 1px solid rgba(56, 189, 248, 0.3);
            border-radius: 50%;
            opacity: 0;
            animation: rise 10s infinite linear;
            box-shadow: 0 0 10px rgba(56, 189, 248, 0.2);
        }
        .bubble.b1 { width: 40px; height: 40px; left: 10%; animation-duration: 12s; animation-delay: 0s; }
        .bubble.b2 { width: 20px; height: 20px; left: 25%; animation-duration: 8s; animation-delay: 2s; }
        .bubble.b3 { width: 50px; height: 50px; left: 40%; animation-duration: 15s; animation-delay: 1s; }
        .bubble.b4 { width: 30px; height: 30px; left: 60%; animation-duration: 10s; animation-delay: 4s; }
        .bubble.b5 { width: 35px; height: 35px; left: 80%; animation-duration: 13s; animation-delay: 3s; }
        .bubble.b6 { width: 15px; height: 15px; left: 90%; animation-duration: 7s; animation-delay: 5s; }

        @keyframes content-appear {
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes rise {
            0% { bottom: -100px; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { bottom: 160px; opacity: 0; }
        }

        @media (max-width: 768px) {
            .banner { height: 120px; }
            .banner-title { font-size: 2.2rem; }
            .banner-subtitle { font-size: 0.9rem; }
        }

        /* Popup styles */
        .popup {
            position: fixed;
            background: white;
            border: 3px solid #38bdf8;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            z-index: 10000;
            max-width: 400px;
            max-height: 600px;
            overflow-y: auto;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
            font-family: 'Inter', sans-serif;
        }

        .popup.show {
            opacity: 1;
            pointer-events: auto;
        }

        .popup img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .popup h3 {
            margin: 0 0 10px 0;
            font-size: 1.2em;
            font-weight: bold;
            color: #1f2937;
        }

        .popup p {
            margin: 5px 0;
            line-height: 1.4;
            word-wrap: break-word;
        }

        .popup .type {
            font-weight: bold;
            color: #38bdf8;
        }

        .popup .stats {
            font-size: 0.9em;
            color: #6b7280;
        }
    </style>
</head>
<body class="p-4 md:p-8">

<div class="container mx-auto">
    <!-- Mermail Themed Banner -->
    <header class="mb-10 md:mb-16">
        <div class="banner">
            <div class="bubble b1"></div>
            <div class="bubble b2"></div>
            <div class="bubble b3"></div>
            <div class="bubble b4"></div>
            <div class="bubble b5"></div>
            <div class="bubble b6"></div>
            <div class="banner-content">
                <h1 class="banner-title">Mermail</h1>
                <p class="banner-subtitle">Deconstruction of a Combo Juggernaut</p>
            </div>
        </div>
    </header>

    <!-- Executive Summary Section -->
    <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 100ms;">
        <div class="card p-6">
            <h2 class="text-xl md:text-2xl font-bold text-white mb-4">Executive Summary</h2>
            <p class="text-cyan-100">
                First emerging from the <a href="https://yugipedia.com/wiki/Abyss_Rising" target="_blank" class="lore-link">abyss rising</a> in 2012, the <strong class="text-accent font-bold">Mermail</strong> archetype is a complex, WATER-based combo engine that redefines the concept of "cost." Discarding cards, typically a loss of resources, is transformed into the primary catalyst for generating overwhelming advantage. Its identity is linked to its symbiotic relationship with the <strong class="text-accent font-bold">Atlantean</strong> and <strong class="text-accent font-bold">Deep Sea</strong> archetypes, turning discards into powerful search and removal effects.
            </p>
        </div>
    </section>

    <!-- The Core Engine Section -->
    <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 200ms;">
        <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">The Core Engine: A Symbiotic Cascade</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="card p-6">
                <h3 class="text-xl font-bold text-white mb-4">Mermail Discard Outlets: The Initiators</h3>
                <p class="text-cyan-100">Mermails initiate combos by having effects that require discarding WATER monsters. This sets the entire strategy in motion.</p>
                <ul class="list-disc list-inside space-y-2 text-cyan-200 mt-4">
                    <li><strong class="text-accent">High-Level (Abyssmegalo):</strong> Discard 2 to summon and search an "Abyss-" Spell/Trap.</li>
                    <li><strong class="text-accent">Mid-Level (Abyssteus):</strong> Discard 1 to summon and search a Level 4 or lower Mermail.</li>
                    <li><strong class="text-accent">Low-Level (Abysspike):</strong> On summon, discard 1 to search a Level 3 WATER monster.</li>
                </ul>
            </div>
            <div class="card p-6">
                <h3 class="text-xl font-bold text-white mb-4">Atlantean Payoffs: The Enablers</h3>
                <p class="text-cyan-100">Atlanteans trigger powerful effects when sent to the GY by a WATER monster's effect, turning costs into benefits.</p>
                <ul class="list-disc list-inside space-y-2 text-cyan-200 mt-4">
                    <li><strong class="text-accent">Atlantean Dragoons:</strong> The ultimate searcher, adding any Sea Serpent from Deck to hand.</li>
                    <li><strong class="text-accent">Atlantean Heavy Infantry:</strong> Destroys a face-up card the opponent controls.</li>
                    <li><strong class="text-accent">Atlantean Marksman:</strong> Destroys a set card the opponent controls.</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Core Combo Walkthrough Section -->
    <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 300ms;">
        <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">Core Combo: The Neptabyss Standard</h2>
        <p class="text-cyan-100 mb-8 text-center max-w-2xl mx-auto">This walkthrough demonstrates the explosive one-card combo potential of <strong class="text-accent font-bold">Neptabyss, the Atlantean Prince</strong>.</p>
        <div class="flex flex-col items-center gap-6">
            <!-- Step 1 -->
            <div class="card p-6 combo-step-card w-full max-w-lg">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                    <div id="neptabyss-img-container" class="card-image-container flex-shrink-0 card-placeholder">Neptabyss, the Atlantean Prince</div>
                    <div>
                        <div class="flex items-center mb-2">
                            <span class="bg-[#0b1a2a] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">1</span>
                            <h3 class="text-lg font-bold">The Prince's Decree</h3>
                        </div>
                        <p class="text-cyan-100">Normal Summon <strong class="text-accent">Neptabyss</strong>. Activate its effect, sending <strong class="text-accent">Atlantean Dragoons</strong> from Deck to GY to add another <strong class="text-accent">Dragoons</strong> to hand.</p>
                    </div>
                </div>
            </div>
            <!-- Arrow -->
            <div class="w-full flex justify-center"><i class="fas fa-arrow-down text-3xl arrow-color my-4"></i></div>
            <!-- Step 2 -->
            <div class="card p-6 combo-step-card w-full max-w-lg">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                    <div id="dragoons-img-container" class="card-image-container flex-shrink-0 card-placeholder">Atlantean Dragoons</div>
                    <div>
                        <div class="flex items-center mb-2">
                            <span class="bg-[#0b1a2a] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">2</span>
                            <h3 class="text-lg font-bold">Trigger the Cascade</h3>
                        </div>
                        <p class="text-cyan-100">The sent <strong class="text-accent">Dragoons</strong> triggers, adding <strong class="text-accent">Mermail Abyssmegalo</strong> from Deck to hand.</p>
                    </div>
                </div>
            </div>
             <!-- Arrow -->
             <div class="w-full flex justify-center"><i class="fas fa-arrow-down text-3xl arrow-color my-4"></i></div>
            <!-- Step 3 -->
            <div class="card p-6 combo-step-card w-full max-w-lg">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-4">
                    <div id="abyssmegalo-img-container" class="card-image-container flex-shrink-0 card-placeholder">Mermail Abyssmegalo</div>
                    <div>
                        <div class="flex items-center mb-2">
                            <span class="bg-[#0b1a2a] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">3</span>
                            <h3 class="text-lg font-bold">Unleash the Megalo</h3>
                        </div>
                        <p class="text-cyan-100">Activate <strong class="text-accent">Abyssmegalo</strong>'s effect, discarding <strong class="text-accent">Dragoons</strong> and another WATER monster to summon it. This triggers both cards, searching for an "Abyss-" Spell/Trap and another Sea Serpent like <strong class="text-accent">Moulinglacia the Elemental Lord</strong>.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Endboard Section -->
    <section class="mb-10 md:mb-16 animate-fadeIn" style="animation-delay: 400ms;">
        <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">Typical End Board Configurations</h2>
        <p class="text-cyan-100 mb-8 text-center max-w-2xl mx-auto">Mermail aims for a flexible board of layered interruptions rather than a single unbreakable boss monster.</p>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Board Piece 1 -->
            <div class="card p-6 pro-con-card text-center">
                <h3 class="text-lg font-bold text-white mb-4">Mermail Abyssgaios</h3>
                <div id="abyssgaios-img-container" class="card-image-container mx-auto mb-4 card-placeholder">Mermail Abyssgaios</div>
                <p class="text-sm text-cyan-200">Provides monster effect negation for monsters with less ATK.</p>
            </div>
            <!-- Board Piece 2 -->
            <div class="card p-6 pro-con-card text-center">
                <h3 class="text-lg font-bold text-white mb-4">Toadally Awesome</h3>
                <div id="toadally-awesome-img-container" class="card-image-container mx-auto mb-4 card-placeholder">Toadally Awesome</div>
                 <p class="text-sm text-cyan-200">A recurring omni-negate. Summoned via Bahamut Shark (<span class="text-red-300">Banned</span>).</p>
            </div>
            <!-- Board Piece 3 -->
            <div class="card p-6 pro-con-card text-center">
                <h3 class="text-lg font-bold text-white mb-4">Abyss Dweller</h3>
                <div id="abyss-dweller-img-container" class="card-image-container mx-auto mb-4 card-placeholder">Abyss Dweller</div>
                <p class="text-sm text-cyan-200">Shuts down all opponent's Graveyard effects for a turn.</p>
            </div>
        </div>
    </section>

    <!-- TCG Banlist Impact Section -->
    <section class="animate-fadeIn" style="animation-delay: 500ms;">
        <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center heading-underline">TCG Banlist Impact</h2>
        <div class="card p-6">
            <p class="text-gray-300 mb-4 text-center">
                <strong class="text-yellow-400 font-bold">MODERATE IMPACT:</strong> While the core Mermail engine is largely untouched, key generic and synergistic cards are on the banlist.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="card combo-step-card p-4">
                    <h4 class="text-lg font-bold text-red-500 mb-2">Forbidden</h4>
                    <ul class="list-disc list-inside space-y-1 text-sm text-gray-300">
                        <li><strong class="text-red-400">Bahamut Shark</strong> - Key for summoning Toadally Awesome.</li>
                        <li><strong class="text-red-400">Abyss Dweller</strong> - Powerful Graveyard suppression, now banned.</li>
                    </ul>
                </div>
                 <div class="card combo-step-card p-4">
                    <h4 class="text-lg font-bold text-yellow-500 mb-2">Limited</h4>
                    <ul class="list-disc list-inside space-y-1 text-sm text-gray-300">
                         <li><strong class="text-yellow-400">Neptabyss, the Atlantean Prince</strong> - The best starter is at 1.</li>
                    </ul>
                </div>
                <div class="card combo-step-card p-4">
                    <h4 class="text-lg font-bold text-green-400 mb-2">Unrestricted</h4>
                    <ul class="list-disc list-inside space-y-1 text-sm text-gray-300">
                        <li>Most Mermail & Atlantean monsters (3 copies each)</li>
                        <li>Deep Sea Diva</li>
                        <li>Moulinglacia the Elemental Lord</li>
                    </ul>
                </div>
            </div>
            <div class="mt-4 p-3 bg-yellow-900 bg-opacity-30 rounded border-l-4 border-yellow-500">
                <p class="text-sm text-gray-300"><strong>Meta Implications:</strong> The loss of Bahamut Shark removes the easy access to the Toadally Awesome negate, forcing the deck to rely more on its in-archetype tools and other Extra Deck options. The limitation of Neptabyss reduces consistency, making hands more reliant on Deep Sea Diva or extenders like Abyssteus.
                </p>
            </div>
        </div>
    </section>

</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const popup = document.getElementById('card-popup');
        let activePopup = null;
        let cardDataCache = {};

        // Card image loader with caching
        async function fetchAndProcessCardData(cardName, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            if (cardDataCache[cardName]) {
                displayCardImage(cardDataCache[cardName], container);
                return;
            }

            const apiUrl = `https://db.ygoprodeck.com/api/v7/cardinfo.php?name=${encodeURIComponent(cardName)}`;
            try {
                const response = await fetch(apiUrl);
                if (!response.ok) throw new Error(`API returned status: ${response.status}`);
                const data = await response.json();
                const cardInfo = data?.data?.[0];
                
                if (cardInfo) {
                    cardDataCache[cardName] = cardInfo;
                    displayCardImage(cardInfo, container);
                } else {
                    throw new Error("Card data not found in API response.");
                }
            } catch (error) {
                console.error(`Failed to fetch data for "${cardName}":`, error);
                container.innerHTML = `<div class="card-placeholder animate-fadeIn">${cardName}</div>`;
            }
        }

        function displayCardImage(cardInfo, container) {
             const imageUrl = cardInfo.card_images?.[0]?.image_url;
             if (imageUrl) {
                const img = document.createElement('img');
                img.src = imageUrl;
                img.alt = cardInfo.name;
                img.className = 'w-full h-auto rounded-lg shadow-md animate-fadeIn';
                container.innerHTML = '';
                container.appendChild(img);
            } else {
                 container.innerHTML = `<div class="card-placeholder animate-fadeIn">${cardInfo.name}</div>`;
            }
        }
        
        function showPopup(event, cardName) {
            event.stopPropagation();
            if (!popup) return;
            const cardInfo = cardDataCache[cardName];
            if (!cardInfo) return;

            let stats = '';
            let atkDef = [];
            if (cardInfo.atk !== undefined) atkDef.push(`ATK/${cardInfo.atk}`);
            if (cardInfo.def !== undefined) atkDef.push(`DEF/${cardInfo.def}`);
            if (cardInfo.linkval) atkDef.push(`LINK-${cardInfo.linkval}`);
            if(atkDef.length > 0) {
                stats = `<p class="stats">${atkDef.join(' ')}</p>`;
            }
            
            const cardType = cardInfo.type.includes('Monster') ? `[${cardInfo.race} / ${cardInfo.type.replace(' Monster', '')}]` : `[${cardInfo.race} Card]`;

            popup.innerHTML = `
                <img src="${cardInfo.card_images?.[0]?.image_url}" alt="${cardInfo.name}">
                <h3>${cardInfo.name}</h3>
                <p class="type">${cardType}</p>
                <p>${cardInfo.desc.replace(/\r\n/g, '<br>')}</p>
                ${stats}
            `;
            
            movePopup(event);
            popup.classList.add('show');
            activePopup = popup;
        }

        function hidePopup() {
            if (activePopup) {
                activePopup.classList.remove('show');
                activePopup = null;
            }
        }

        function movePopup(event) {
            if (!popup) return;
            const popupWidth = 400;
            const popupHeight = 600;
            const cushion = 20;

            let x = event.clientX + cushion;
            let y = event.clientY + cushion;

            if (x + popupWidth > window.innerWidth) {
                x = event.clientX - popupWidth - cushion;
            }
            if (y + popupHeight > window.innerHeight) {
                y = event.clientY - popupHeight - cushion;
            }

            popup.style.left = `${x}px`;
            popup.style.top = `${y}px`;
        }

        // Global click listener to close the popup
        document.addEventListener('click', (event) => {
            if (activePopup && !activePopup.contains(event.target)) {
                hidePopup();
            }
        });

        // Mouse move listener for popup positioning
        document.addEventListener('mousemove', (event) => {
            if (activePopup) {
                movePopup(event);
            }
        });

        const cardsToLoad = {
            'neptabyss-img-container': 'Neptabyss, the Atlantean Prince',
            'dragoons-img-container': 'Atlantean Dragoons',
            'abyssmegalo-img-container': 'Mermail Abyssmegalo',
            'abyssgaios-img-container': 'Mermail Abyssgaios',
            'toadally-awesome-img-container': 'Toadally Awesome',
            'abyss-dweller-img-container': 'Abyss Dweller'
        };

        for (const [containerId, cardName] of Object.entries(cardsToLoad)) {
            fetchAndProcessCardData(cardName, containerId);
            // Add click event listener to the container
            const container = document.getElementById(containerId);
            if (container) {
                container.addEventListener('click', (event) => {
                    event.stopPropagation();
                    if (activePopup && activePopup === popup) {
                        hidePopup();
                    } else {
                        showPopup(event, cardName);
                    }
                });
            }
        }
    });
</script>
<div id="card-popup" class="popup"></div>
</body>
</html>


