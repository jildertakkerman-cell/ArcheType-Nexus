<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crusadia Archetype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d121c;
            color: #dbeafe;
        }
        .container {
            max-width: 1024px;
        }
        .card {
            background-color: #1e293b; /* Slate Blue-Gray */
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
            border: 1px solid #3b82f6; /* Blue border */
        }
        .combo-step-card, .pro-con-card {
            background-color: #334155; /* Darker Slate */
            border: 1px solid #60a5fa; /* Lighter Blue */
        }
        .card-image-container {
            width: 100%;
            max-width: 180px;
            flex-shrink: 0;
        }
        .card-image {
            width: 100%;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out;
        }
        .card-placeholder {
            background-color: #1e293b;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.75rem;
            line-height: 1rem;
            font-weight: bold;
            height: 100%;
            min-height: 128px;
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: 0 0 10px #1e293b;
            cursor: pointer;
        }
        .text-accent {
            color: #f59e0b; /* Amber/Gold */
        }
        .arrow-color {
            color: #3b82f6; /* Blue */
        }

        /* --- New Animated Banner Styles --- */
        .banner {
            position: relative;
            height: 120px;
            background: radial-gradient(circle, #1e3a8a 0%, #0d121c 70%);
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            border-radius: 1rem;
            border: 2px solid #3b82f6;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.7);
        }
        .banner-content {
            z-index: 2;
            opacity: 0;
            transform: scale(0.95);
            animation: content-appear 1s ease-out 0.5s forwards;
            position: relative;
        }
        .banner-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            color: #eff6ff;
            text-shadow: 0 0 10px rgba(245, 158, 11, 0.7), 0 0 20px rgba(59, 130, 246, 0.5);
            letter-spacing: 0.05em;
        }
        .banner-subtitle {
            font-size: 1rem;
            color: #bfdbfe;
        }
        .light-ray {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 2px;
            height: 400px;
            background: linear-gradient(to bottom, transparent, rgba(245, 158, 11, 0.6), transparent);
            transform-origin: top center;
            animation: rotate 10s linear infinite;
        }
        .light-ray:nth-child(2) { animation-delay: -2.5s; }
        .light-ray:nth-child(3) { animation-delay: -5s; }
        .light-ray:nth-child(4) { animation-delay: -7.5s; }

        @keyframes content-appear {
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes rotate {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        @media (max-width: 768px) {
            .banner { height: 100px; }
            .banner-title { font-size: 2rem; }
            .banner-subtitle { font-size: 0.875rem; }
        }
                    /* --- Yu-Gi-Oh! Themed Home Button Styles --- */
        .ygo-home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #1e1b4b 100%);
            color: white;
            border: 2px solid #6366f1;
            border-radius: 12px;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 4px 15px rgba(99, 102, 241, 0.4),
                0 0 20px rgba(99, 102, 241, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            overflow: hidden;
        }
        
        .ygo-home-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 30%, rgba(99, 102, 241, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(139, 92, 246, 0.2) 0%, transparent 50%);
            animation: ygoButtonPulse 3s ease-in-out infinite;
            pointer-events: none;
        }
        
        .ygo-home-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 
                0 8px 25px rgba(99, 102, 241, 0.6),
                0 0 30px rgba(99, 102, 241, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border-color: #8b5cf6;
        }
        
        .ygo-home-button:active {
            transform: translateY(-1px) scale(1.02);
        }
        
        .ygo-home-button i {
            font-size: 22px;
            position: relative;
            z-index: 2;
            text-shadow: 0 0 10px rgba(99, 102, 241, 0.8);
            animation: ygoIconGlow 2s ease-in-out infinite alternate;
        }
        
        .ygo-home-button .ygo-home-text {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            font-weight: 600;
            color: #a5b4fc;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
            opacity: 0;
            transition: opacity 0.3s ease;
            white-space: nowrap;
            pointer-events: none;
        }
        
        .ygo-home-button:hover .ygo-home-text {
            opacity: 1;
        }
        
        @keyframes ygoButtonPulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        @keyframes ygoIconGlow {
            0% { 
                text-shadow: 
                    0 0 10px rgba(99, 102, 241, 0.8),
                    0 0 20px rgba(139, 92, 246, 0.4);
            }
            100% { 
                text-shadow: 
                    0 0 15px rgba(99, 102, 241, 1),
                    0 0 30px rgba(139, 92, 246, 0.6),
                    0 0 40px rgba(59, 130, 246, 0.3);
            }
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .ygo-home-button {
                width: 50px;
                height: 50px;
                top: 15px;
                left: 15px;
            }
            
            .ygo-home-button i {
                font-size: 18px;
            }
        }
        /* --- POPUP STYLES --- */
        #card-popup {
            background-color: #1e293b;
            color: #dbeafe;
            border-color: #3b82f6;
            font-family: 'Inter', sans-serif;
        }
        #card-popup h3 {
            color: #60a5fa;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        #card-popup p {
            margin: 0;
        }
        #card-popup-stats {
            color: #3b82f6;
            font-weight: 600;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <!-- Yu-Gi-Oh! Themed Home Button -->
    <a href="index-refactored.html" class="ygo-home-button" title="Return to Archetype Nexus">
        <i class="fas fa-home"></i>
        <span class="ygo-home-text">NEXUS</span>
    </a>

<div class="container mx-auto">
        <!-- New Animated Banner -->
        <header class="mb-10 md:mb-16">
            <div class="banner">
                <div class="light-ray"></div>
                <div class="light-ray"></div>
                <div class="light-ray"></div>
                <div class="light-ray"></div>
                <div class="banner-content">
                    <h1 class="banner-title">Crusadia</h1>
                    <p class="banner-subtitle">An Analysis of the Go-Second OTK Strategy</p>
                </div>
            </div>
        </header>

        <!-- Executive Summary Section -->
        <section class="mb-10 md:mb-16">
            <div class="card p-6">
                <h2 class="text-xl md:text-2xl font-bold text-white mb-4">Strategic Identity</h2>
                <p class="text-blue-200">
                    The <strong class="text-accent font-bold">Crusadia</strong> archetype is a high-impact, "go-second" strategy hyper-focused on achieving a One-Turn Kill (OTK). Its game plan is ruthlessly efficient: perform a linear, resource-effective Link climb to summon the boss monster, <strong class="text-accent font-bold">Crusadia Equimax</strong>, and amplify its attack to game-ending levels. Assembled as vanguards in a <a href="https://yugipedia.com/wiki/World_Legacy" target="_blank" class="text-accent underline hover:text-yellow-300">world-spanning conflict</a>, their mechanics reflect a united, overwhelming assault.
                </p>
            </div>
        </section>

        <!-- Core Mechanics Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Foundational Mechanics</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-white mb-2">Link Zone Extension</h3>
                    <p class="text-blue-200">All Main Deck Crusadia monsters can Special Summon themselves from the hand to a zone a Link Monster points to. This universal extender effect is the engine that fuels the entire Link climbing sequence.</p>
                </div>
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-white mb-2">ATK Scaling from Linked Monsters</h3>
                    <p class="text-blue-200">The archetype's Link monsters gain ATK equal to the original ATK of all monsters they point to. This mechanic is central to the OTK, turning both your own monsters and the opponent's into fuel for <strong class="text-accent font-bold">Equimax's</strong> final attack.</p>
                </div>
            </div>
        </section>

        <!-- Core Combo Walkthrough Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Core Combo: The Path to Equimax</h2>
            <p class="text-blue-200 mb-8 text-center max-w-2xl mx-auto">This walkthrough demonstrates the standard, linear path from a single Crusadia monster to a board-clearing OTK.</p>
            <div class="flex flex-col items-center gap-6">
                <!-- Step 1 -->
                <div class="card p-6 combo-step-card w-full max-w-md flex flex-col md:flex-row items-center md:items-start gap-4">
                    <div id="magius-img-container" class="card-image-container card-placeholder">Crusadia Magius</div>
                    <div>
                        <div class="flex items-center mb-2">
                            <span class="bg-[#1e293b] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">1</span>
                            <h3 class="text-lg font-bold">The Catalyst</h3>
                        </div>
                        <p class="text-blue-200">Normal Summon any Crusadia monster and Link it away for <strong class="text-accent font-bold">Crusadia Magius</strong>. Special Summon another Crusadia to its zone to trigger its effect, searching for a combo piece like <strong class="text-accent font-bold">Crusadia Maximus</strong>.</p>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 2 -->
                <div class="card p-6 combo-step-card w-full max-w-md flex flex-col md:flex-row items-center md:items-start gap-4">
                    <div id="regulex-img-container" class="card-image-container card-placeholder">Crusadia Regulex</div>
                    <div>
                        <div class="flex items-center mb-2">
                            <span class="bg-[#1e293b] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">2</span>
                            <h3 class="text-lg font-bold">The Spell Search</h3>
                        </div>
                        <p class="text-blue-200">Link climb into <strong class="text-accent font-bold">Crusadia Regulex</strong>. Special Summon another Crusadia to its zone to search for the critical Field Spell, <strong class="text-accent font-bold">Crusadia Revival</strong>.</p>
                    </div>
                </div>
                <!-- Arrow -->
                <div class="w-full flex justify-center">
                    <svg class="h-10 w-10 arrow-color animate-fadeIn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
                <!-- Step 3 -->
                <div class="card p-6 combo-step-card w-full max-w-md flex flex-col md:flex-row items-center md:items-start gap-4">
                    <div id="equimax-img-container" class="card-image-container card-placeholder">Crusadia Equimax</div>
                    <div>
                        <div class="flex items-center mb-2">
                            <span class="bg-[#1e293b] text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-3">3</span>
                            <h3 class="text-lg font-bold">The Finisher</h3>
                        </div>
                        <p class="text-blue-200">Use all monsters to Link Summon <strong class="text-accent font-bold">Crusadia Equimax</strong>. Your board is now set for the final damage-dealing phase.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- The OTK Endboard Section -->
        <section class="mb-10 md:mb-16">
            <div class="card p-6">
                <h2 class="text-xl md:text-2xl font-bold text-white mb-4">The OTK Endboard Configuration</h2>
                <p class="text-blue-200 mb-6">The ideal endboard leverages the opponent's own monsters against them. By summoning a <strong class="text-accent font-bold">Kaiju</strong> to their field, you simultaneously remove a threat and provide a high-ATK target for Equimax.</p>
                <div class="bg-[#0f172a] p-4 rounded-lg flex flex-col md:flex-row items-center justify-around gap-4">
                    <div class="text-center">
                        <h4 class="font-bold text-lg">Your Field</h4>
                        <div class="flex items-center gap-2 mt-2">
                            <div id="endboard-equimax-img" class="w-24 h-36 card-placeholder text-xs">Equimax</div>
                            <div id="endboard-maximus-img" class="w-24 h-36 card-placeholder text-xs">Maximus</div>
                        </div>
                    </div>
                    <div class="text-center font-bold text-2xl text-accent animate-pulse">VS</div>
                    <div class="text-center">
                        <h4 class="font-bold text-lg">Opponent's Field</h4>
                         <div class="flex items-center gap-2 mt-2">
                            <div id="endboard-kaiju-img" class="w-24 h-36 card-placeholder text-xs">Jizukiru</div>
                        </div>
                    </div>
                </div>
                <div class="mt-6 text-center">
                    <h3 class="text-lg font-bold text-white mb-2">Damage Calculation</h3>
                    <p class="text-blue-200 max-w-xl mx-auto">With <strong class="text-accent font-bold">Crusadia Revival</strong> on the field and <strong class="text-accent font-bold">Equimax</strong> pointing to <strong class="text-accent font-bold">Maximus</strong> and an opponent's <strong class="text-accent font-bold">Jizukiru</strong>:</p>
                    <div class="mt-4 font-mono text-lg bg-[#0f172a] p-3 rounded-lg inline-block">
                        <span class="text-white">2000 (Base) + 1600 (Maximus) + 3300 (Jizukiru) + 500 (Revival) = <strong class="text-accent">7400 ATK</strong></span><br>
                        <span class="text-white">(7400 ATK - 3300 ATK) * 2 (Maximus Effect) = <strong class="text-green-400">8200 Damage</strong></span>
                    </div>
                </div>
            </div>
        </section>


        <!-- Pros, Cons Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">Competitive Analysis</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Strengths Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-green-400 mb-4">Strengths</h3>
                    <ul class="list-disc list-inside space-y-2 text-blue-200">
                        <li><i class="fas fa-check-circle text-green-400"></i> <strong class="text-white font-bold">High Damage Output:</strong> Capable of easily reaching over 8000 damage in a single attack.</li>
                        <li><i class="fas fa-hammer text-green-400"></i> <strong class="text-white font-bold">Board Breaking:</strong> Synergizes perfectly with Kaijus and other board-wiping spells to dismantle established fields.</li>
                        <li><i class="fas fa-redo text-green-400"></i> <strong class="text-white font-bold">Resilience via Chain Blocking:</strong> Effects like Crusadia Draco can protect key searches from negation.</li>
                    </ul>
                </div>
                <!-- Weaknesses Card -->
                <div class="card p-6 pro-con-card">
                    <h3 class="text-xl font-bold text-red-400 mb-4">Weaknesses</h3>
                    <ul class="list-disc list-inside space-y-2 text-blue-200">
                        <li><i class="fas fa-times-circle text-red-400"></i> <strong class="text-white font-bold">Linear & Predictable:</strong> The combo line is very straightforward, making it easy for experienced opponents to disrupt at key choke points.</li>
                        <li><i class="fas fa-hand-paper text-red-400"></i> <strong class="text-white font-bold">Vulnerable to Hand Traps:</strong> Highly susceptible to cards like Nibiru, Ash Blossom, and Effect Veiler that can stop the combo before it starts.</li>
                         <li><i class="fas fa-ban text-red-400"></i> <strong class="text-white font-bold">Fragile:</strong> If the initial OTK fails, the deck has very limited resources for a follow-up play.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Card Arsenal Section -->
        <section class="mb-10 md:mb-16">
            <h2 class="text-xl md:text-3xl font-bold text-white mb-6 text-center">The Crusadia Arsenal</h2>
            <p class="text-blue-200 mb-8 text-center max-w-2xl mx-auto">An overview of the core cards that enable the OTK strategy.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card p-6"><h3 class="text-xl font-bold text-accent mb-2">Crusadia Maximus</h3><p class="text-blue-200">The damage multiplier. Its key effect allows a Crusadia Link monster to inflict double battle damage for the turn.</p></div>
                <div class="card p-6"><h3 class="text-xl font-bold text-accent mb-2">Crusadia Draco</h3><p class="text-blue-200">The recycler. Recovers Crusadia monsters from the GY and is essential for chain-blocking to protect searches.</p></div>
                <div class="card p-6"><h3 class="text-xl font-bold text-accent mb-2">Crusadia Arboria</h3><p class="text-blue-200">The protector. Provides targeting protection to a Crusadia monster, safeguarding your combo pieces.</p></div>
                <div class="card p-6"><h3 class="text-xl font-bold text-accent mb-2">Crusadia Reclusia</h3><p class="text-blue-200">The disruptor. Offers spot removal by destroying one of your cards and one of the opponent's cards.</p></div>
                <div class="card p-6"><h3 class="text-xl font-bold text-accent mb-2">Crusadia Revival</h3><p class="text-blue-200">The OTK enabler. Provides a 500 ATK boost and allows Equimax to attack all opponent's monsters.</p></div>
                <div class="card p-6"><h3 class="text-xl font-bold text-accent mb-2">Kaijus (e.g., Jizukiru)</h3><p class="text-blue-200">Non-archetypal support that is core to the strategy. Removes opponent's threats and provides a high-ATK target for Equimax.</p></div>
            </div>
        </section>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            function createAndAppendPlaceholder(cardName, containerId) {
                const container = document.getElementById(containerId);
                if (!container) return;
                container.innerHTML = '';
                const placeholder = document.createElement('div');
                placeholder.className = 'card-placeholder animate-fadeIn';
                if (container.classList.contains('w-24')) { // check for smaller placeholders
                    placeholder.classList.add('w-24', 'h-36', 'text-xs');
                }
                placeholder.textContent = cardName;
                container.appendChild(placeholder);
            }

            // --- EXISTING SCRIPT FOR CARD IMAGES ---
            const cardDataCache = {};
            const popup = document.getElementById('card-popup');
            let activePopup = null;
            let lastShown = 0;
            let currentCard = null;

            async function fetchAndProcessCardData(cardName, containerId) {
                const container = document.getElementById(containerId);
                if (!container) return;
                
                container.addEventListener('click', (event) => {
                    event.stopPropagation();
                    showPopup(event, cardName);
                });

                const apiUrl = `https://db.ygoprodeck.com/api/v7/cardinfo.php?name=${encodeURIComponent(cardName)}`;

                try {
                    if (cardDataCache[cardName]) {
                        displayCardImage(cardDataCache[cardName], container);
                        return;
                    }
                    
                    const response = await fetch(apiUrl);
                    if (!response.ok) throw new Error(`API error: ${response.status}`);
                    const data = await response.json();
                    const cardInfo = data?.data?.[0];
                    
                    if (cardInfo) {
                        cardDataCache[cardName] = cardInfo;
                        displayCardImage(cardInfo, container);
                    } else {
                        throw new Error("Card data not found in API response.");
                    }
                } catch (error) {
                    console.error(`Failed to fetch data for "${cardName}":`, error);
                    container.innerHTML = `<div class="card-placeholder">${cardName}</div>`;
                }
            }

            function displayCardImage(cardInfo, container) {
                 const imageUrl = cardInfo.card_images?.[0]?.image_url;
                 if (imageUrl) {
                    const img = document.createElement('img');
                    img.src = imageUrl;
                    img.alt = cardInfo.name;
                    img.className = 'w-full h-auto rounded-lg shadow-md';
                    container.innerHTML = '';
                    container.appendChild(img);
                } else {
                     container.innerHTML = `<div class="card-placeholder">${cardInfo.name}</div>`;
                }
            }
            
            function showPopup(event, cardName) {
                if (currentCard === cardName) {
                    hidePopup();
                    return;
                }
                hidePopup(); // Ensure any existing popup is hidden first
                if (!popup) return;
                const cardInfo = cardDataCache[cardName];
                if (!cardInfo) return;

                let stats = '';
                let atkDef = [];
                if (cardInfo.atk !== undefined) atkDef.push(`ATK/${cardInfo.atk}`);
                if (cardInfo.def !== undefined) atkDef.push(`DEF/${cardInfo.def}`);
                if (cardInfo.linkval) atkDef.push(`LINK-${cardInfo.linkval}`);
                if(atkDef.length > 0) {
                    stats = `<p id="card-popup-stats" class="mt-2">${atkDef.join(' ')}</p>`;
                }
                
                const cardType = cardInfo.type.includes('Monster') ? `[${cardInfo.race} / ${cardInfo.type.replace(' Monster', '')}]` : `[${cardInfo.race} Card]`;

                popup.innerHTML = `
                    <div>
                        <h3>${cardInfo.name}</h3>
                        <p class="text-xs text-gray-300">${cardType}</p>
                        <div class="w-full h-px bg-gray-600 my-2"></div>
                        <p class="text-xs">${cardInfo.desc.replace(/\r\n/g, '<br>')}</p>
                        ${stats}
                    </div>
                `;
                
                movePopup(event);
                popup.style.display = 'block';
                setTimeout(() => { popup.style.opacity = 1; }, 10);
                activePopup = popup;
                lastShown = Date.now();
                currentCard = cardName;
            }

            function hidePopup() {
                if (Date.now() - lastShown < 100) return; // Ignore hide calls immediately after showing
                if (activePopup) {
                    activePopup.style.opacity = 0;
                    setTimeout(() => { 
                        if (activePopup) activePopup.style.display = 'none'; 
                    }, 200);
                    activePopup = null;
                    currentCard = null;
                }
            }

            function movePopup(event) {
                if (!popup) return;
                const popupWidth = popup.offsetWidth;
                const popupHeight = popup.offsetHeight;
                const cushion = 20;

                let x = event.clientX + cushion;
                let y = event.clientY + cushion;

                if (x + popupWidth > window.innerWidth) {
                    x = event.clientX - popupWidth - cushion;
                }
                if (y + popupHeight > window.innerHeight) {
                    y = event.clientY - popupHeight - cushion;
                }

                popup.style.left = `${x}px`;
                popup.style.top = `${y}px`;
            }

            // Global click listener to close the popup
            document.addEventListener('click', hidePopup);

            const imageRequests = {
                'magius-img-container': 'Crusadia Magius',
                'regulex-img-container': 'Crusadia Regulex',
                'equimax-img-container': 'Crusadia Equimax',
                'endboard-equimax-img': 'Crusadia Equimax',
                'endboard-maximus-img': 'Crusadia Maximus',
                'endboard-kaiju-img': 'Jizukiru, the Star Destroying Kaiju'
            };

            for (const [containerId, cardName] of Object.entries(imageRequests)) {
                fetchAndProcessCardData(cardName, containerId);
            }
        });
    </script>
    <div id="card-popup" class="fixed z-50 bg-gray-800 text-white p-4 rounded-lg shadow-lg border-2 border-[#3b82f6] max-w-xs max-h-96 overflow-y-auto pointer-events-none opacity-0 transition-opacity duration-200"></div>
</body>
</html>


